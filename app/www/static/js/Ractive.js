/*
	ractive.min.js v0.4.0
	2014-05-07 - commit f13fffc8 

	http://ractivejs.org
	http://twitter.com/RactiveJS

	Released under the MIT License.
*/

!function(a){"use strict";var b=a.Ractive,c=null,d=function(){var a,b;return a={el:null,template:"",complete:null,preserveWhitespace:!1,append:!1,twoway:!0,modifyArrays:!0,lazy:!1,debug:!1,noIntro:!1,transitionsEnabled:!0,magic:!1,noCssTransform:!1,adapt:[],sanitize:!1,stripComments:!0,isolated:!1,delimiters:["{{","}}"],tripleDelimiters:["{{{","}}}"],computed:null},b={keys:Object.keys(a),defaults:a}}(c),e=function(){var a;return a="undefined"==typeof document?!1:document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}(),f={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},g=function(a,b){var c;return c=a?function(a,c){return c&&c!==b.html?document.createElementNS(c,a):document.createElement(a)}:function(a,c){if(c&&c!==b.html)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information";return document.createElement(a)}}(e,f),h=function(){var a="object"==typeof document;return a}(),i=function(a){var b;try{Object.defineProperty({},"test",{value:0}),a&&Object.defineProperty(document.createElement("div"),"test",{value:0}),b=Object.defineProperty}catch(c){b=function(a,b,c){a[b]=c.value}}return b}(h),j=function(a,b,c){var d;try{try{Object.defineProperties({},{test:{value:0}})}catch(e){throw e}c&&Object.defineProperties(a("div"),{test:{value:0}}),d=Object.defineProperties}catch(e){d=function(a,c){var d;for(d in c)c.hasOwnProperty(d)&&b(a,d,c[d])}}return d}(g,i,h),k=function(a){return!isNaN(parseFloat(a))&&isFinite(a)},l=function(a){return function(b,c,d){var e;if("string"!=typeof c||!a(d))throw new Error("Bad arguments");if(e=+b.get(c)||0,!a(e))throw new Error("Cannot add to a non-numeric value");return b.set(c,e+d)}}(k),m=function(a){return function(b,c){return a(this,b,void 0===c?1:+c)}}(l),n=function(a,b){return null===a&&null===b?!0:"object"==typeof a||"object"==typeof b?!1:a===b},o=function(){function a(a){setTimeout(a,0)}function b(a,b){return function(){for(var c;c=a.shift();)c(b)}}function c(a,b,e,f){var g;if(b===a)throw new TypeError("A promise's fulfillment handler cannot return the same promise");if(b instanceof d)b.then(e,f);else if(!b||"object"!=typeof b&&"function"!=typeof b)e(b);else{try{g=b.then}catch(h){return void f(h)}if("function"==typeof g){var i,j,k;j=function(b){i||(i=!0,c(a,b,e,f))},k=function(a){i||(i=!0,f(a))};try{g.call(b,j,k)}catch(h){if(!i)return f(h),void(i=!0)}}else e(b)}}var d,e={},f={},g={};return"function"==typeof Promise?d=Promise:(d=function(h){var i,j,k,l,m,n,o=[],p=[],q=e;return k=function(c){return function(d){q===e&&(i=d,q=c,j=b(q===f?o:p,i),a(j))}},l=k(f),m=k(g),h(l,m),n={then:function(b,f){var g=new d(function(d,h){var i=function(a,b,e){b.push("function"==typeof a?function(b){var e;try{e=a(b),c(g,e,d,h)}catch(f){h(f)}}:e)};i(b,o,d),i(f,p,h),q!==e&&a(j)});return g}},n["catch"]=function(a){return this.then(null,a)},n},d.all=function(a){return new d(function(b,c){var d,e,f,g=[];if(!a.length)return void b(g);for(f=function(e){a[e].then(function(a){g[e]=a,--d||b(g)},c)},d=e=a.length;e--;)f(e)})},d.resolve=function(a){return new d(function(b){b(a)})},d.reject=function(a){return new d(function(b,c){c(a)})}),d}(),p=function(){var a=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g;return function(b){return(b||"").replace(a,".$1")}}(),q=["o","ms","moz","webkit"],r=function(a){var b;return"undefined"==typeof window?b=null:(!function(a,b,c){var d,e;if(!c.requestAnimationFrame){for(d=0;d<a.length&&!c.requestAnimationFrame;++d)c.requestAnimationFrame=c[a[d]+"RequestAnimationFrame"];c.requestAnimationFrame||(e=c.setTimeout,c.requestAnimationFrame=function(a){var c,d,f;return c=Date.now(),d=Math.max(0,16-(c-b)),f=e(function(){a(c+d)},d),b=c+d,f})}}(a,0,window),b=window.requestAnimationFrame),b}(q),s=function(){var a;return a="undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now?function(){return window.performance.now()}:function(){return Date.now()}}(),t=[],u=function(a,b){var c=a.indexOf(b);-1!==c&&a.splice(c,1)},v=function(a,b,c){var d,e,f,g,h,i,j="/* Ractive.js component styles */\n",k={},l=[];return b?(a.push(function(){e=a.runloop}),f=document.createElement("style"),f.type="text/css",g=document.getElementsByTagName("head")[0],i=!1,h=f.styleSheet,d={add:function(a){a.css&&(k[a._guid]||(k[a._guid]=0,l.push(a.css),e.scheduleCssUpdate()),k[a._guid]+=1)},remove:function(a){a.css&&(k[a._guid]-=1,k[a._guid]||(c(l,a.css),e.scheduleCssUpdate()))},update:function(){var a;l.length?(a=j+l.join(" "),h?h.cssText=a:f.innerHTML=a,i||g.appendChild(f)):i&&g.removeChild(f)}}):d=null,d}(t,h,u),w=function(a,b){var c,d,e,f,g,h;for(c=[],h=a._rendering?a.fragment.docFrag:a.el,d=h.querySelectorAll('input[type="checkbox"][name="{{'+b+'}}"]'),f=d.length,g=0;f>g;g+=1)e=d[g],(e.hasAttribute("checked")||e.checked)&&c.push(e._ractive.value);return c},x=Object.prototype.hasOwnProperty,y=function(a){do if(a.context)return a.context;while(a=a.parent);return""},z=function(a,b,c,d){function e(a,b){var c;if("."===b)return a;if(c=a?a.split("."):[],"../"===b.substr(0,3)){for(;"../"===b.substr(0,3);){if(!c.length)throw new Error(g);c.pop(),b=b.substring(3)}return c.push(b),c.join(".")}return a?a+b:b.substring(1)}var f,g,h;return a.push(function(){f=a.get}),g='Could not resolve reference - too many "../" prefixes',h={evaluateWrapped:!0},function(a,g,i){var j,k,l,m;if(g=b(g),"."===g.charAt(0))return e(d(i),g);k=g.split(".")[0];do if(j=i.context,j&&(m=!0,l=f(a,j,h),l&&("object"==typeof l||"function"==typeof l)&&k in l))return j+"."+g;while(i=i.parent);return m||a._parent&&!a.isolated?c.call(a.data,k)?g:void 0!==f(a,g)?g:void 0:g}}(t,p,x,y),A=function(a){var b,c,d,e,f=[""];for(b=a.length;b--;)for(c=a[b],d=c.split(".");d.length>1;)d.pop(),e=d.join("."),f[e]!==!0&&(f.push(e),f[e]=!0);return f},B=function(){function a(a,c,d){var f;for(a._patternObservers.length&&e(a,c,c,d,!0),f=0;f<a._deps.length;f+=1)b(a,c,f,d)}function b(a,b,e,f){var g=a._deps[e];g&&(c(g[b]),f||d(a._depsMap[b],a,e))}function c(a){var b,c;if(a)for(c=a.length,b=0;c>b;b+=1)a[b].update()}function d(a,c,d,e){var f;if(a)for(f=a.length;f--;)b(c,a[f],d,e)}function e(a,b,c,d,g){var i,j,k,l,m,n,o,p;for(i=a._patternObservers.length;i--;)j=a._patternObservers[i],j.regex.test(c)&&j.update(c);d||(p=function(b){if(k=a._depsMap[b])for(i=k.length;i--;)l=k[i],m=h.exec(l)[0],n=c?c+"."+m:m,e(a,l,n)},g?(o=f(c),o.forEach(p)):p(b))}function f(a){var b,c,d,e,f,h;for(b=a.split("."),c=g(b.length),f=[],d=function(a,c){return a?"*":b[c]},e=c.length;e--;)h=c[e].map(d).join("."),f[h]||(f.push(h),f[h]=!0);return f}function g(a){var b,c,d,e,f,g="";if(!i[a]){for(d=[];g.length<a;)g+=1;for(b=parseInt(g,2),e=function(a){return"1"===a},f=0;b>=f;f+=1){for(c=f.toString(2);c.length<a;)c="0"+c;d[f]=Array.prototype.map.call(c,e)}i[a]=d}return i[a]}var h,i={};return h=/[^\.]+$/,a.multiple=function(a,c,d){var f,g,h;if(h=c.length,a._patternObservers.length)for(f=h;f--;)e(a,c[f],c[f],d,!0);for(f=0;f<a._deps.length;f+=1)if(a._deps[f])for(g=h;g--;)b(a,c[g],f,d)},a}(),C=function(a){var b,c,d,e;return b=function(a,b){var f=[];return f.detachQueue=[],f.remove=d,f.init=e,f._check=c,f._callback=a,f._previous=b,b&&b.push(f),f},c=function(){var a;if(this._ready&&!this.length){for(;a=this.detachQueue.pop();)a.detach();"function"==typeof this._callback&&this._callback(),this._previous&&this._previous.remove(this)}},d=function(b){a(this,b),this._check()},e=function(){this._ready=!0,this._check()},b}(u),D=function(a,b,c,d,e,f,g,h){function i(){var a,c,e,h,i;for(e=F.length;e--;)a=F[e],a._changes.length&&(c=f(a._changes),g.multiple(a,c,!0));for(j();p;){for(p=!1;a=z.pop();)a.update();for(;a=y.pop();)a.update().deferred=!1;for(;a=A.pop();)a.deferredUpdate();for(;a=C.pop();)m(a.root,a.keypath,d(a.root,a.keypath));for(;a=D.pop();)a.update()}for(r&&(r.focus(),r=null);a=w.pop();)a.update().deferred=!1;for(;a=s.pop();)a._sort();for(;a=t.pop();)a.init();for(;a=u.pop();)a.init();for(;a=v.pop();)a.update();for(;a=x.pop();)a.active=!1;for(;a=F.pop();)if(F[a._guid]=!1,a._changes.length){for(h={};i=a._changes.pop();)h[i]=l(a,i);a.fire("change",h)}n&&(b.update(),n=!1)}function j(){var a,b,c;if(E.length)for(a=E.splice(0,E.length);b=a.pop();)b.keypath||(c=e(b.root,b.ref,b.parentFragment),void 0!==c?b.resolve(c):E.push(b))}a.push(function(){l=a.get,m=a.set});var k,l,m,n,o,p=!1,q=!1,r=null,s=[],t=[],u=[],v=[],w=[],x=[],y=[],z=[],A=[],B={},C=[],D=[],E=[],F=[];return k={start:function(a,b){this.addInstance(a),q||(o=h(b,o))},end:function(){return q?void j():(q=!0,i(),q=!1,o.init(),void(o=o._previous))},trigger:function(){return q?void j():(q=!0,i(),void(q=!1))},focus:function(a){r=a},addInstance:function(a){a&&!F[a._guid]&&(F.push(a),F[F._guid]=!0)},addLiveQuery:function(a){s.push(a)},addDecorator:function(a){t.push(a)},addTransition:function(a){a._manager=o,o.push(a),u.push(a)},addObserver:function(a){v.push(a)},addAttribute:function(a){w.push(a)},addBinding:function(a){a.active=!0,x.push(a)},scheduleCssUpdate:function(){q?n=!0:b.update()},addEvaluator:function(a){p=!0,y.push(a)},addComputation:function(a){p=!0,z.push(a)},addSelectValue:function(a){p=!0,A.push(a)},addCheckbox:function(a){B[a.keypath]||(p=!0,C.push(a))},addRadio:function(a){p=!0,D.push(a)},addUnresolved:function(a){p=!0,E.push(a)},removeUnresolved:function(a){c(E,a)},detachWhenReady:function(a){o.detachQueue.push(a)}},a.runloop=k,k}(t,v,u,w,z,A,B,C),E=function(a,b,c){var d=[],e={tick:function(){var f,g,h;for(h=b(),c.start(),f=0;f<d.length;f+=1)g=d[f],g.tick(h)||d.splice(f--,1);c.end(),d.length?a(e.tick):e.running=!1},add:function(b){d.push(b),e.running||(e.running=!0,a(e.tick))},abort:function(a,b){for(var c,e=d.length;e--;)c=d[e],c.root===b&&c.keypath===a&&c.stop()}};return e}(r,s,D),F=function(){var a=Object.prototype.toString;return function(b){return"[object Array]"===a.call(b)}}(),G=function(a){return function(b){var c,d;if(!b||"object"!=typeof b)return b;if(a(b))return b.slice();c={};for(d in b)b.hasOwnProperty(d)&&(c[d]=b[d]);return c}}(F),H={},I=function(a,b,c){switch(b){case"splice":return c;case"sort":case"reverse":return null;case"pop":return a.length?[-1]:null;case"push":return[a.length,0].concat(c);case"shift":return[0,1];case"unshift":return[0,0].concat(c)}},J=function(a,b){var c,d,e,f,g,h,i;return b?(c=+(b[0]<0?a.length+b[0]:b[0]),g=Math.max(0,b.length-2),h=void 0!==b[1]?b[1]:a.length-c,h=Math.min(h,a.length-c),i=g-h,f=a.length+i,i?(d=Math.max(a.length,f),e=Math.max(a.length,f)):d=e=c+g,{rangeStart:c,rangeEnd:d,clearEnd:e,balance:i,added:g,removed:h}):null},K={TEXT:1,INTERPOLATOR:2,TRIPLE:3,SECTION:4,INVERTED:5,CLOSING:6,ELEMENT:7,PARTIAL:8,COMMENT:9,DELIMCHANGE:10,MUSTACHE:11,TAG:12,ATTRIBUTE:13,CLOSING_TAG:14,COMPONENT:15,NUMBER_LITERAL:20,STRING_LITERAL:21,ARRAY_LITERAL:22,OBJECT_LITERAL:23,BOOLEAN_LITERAL:24,GLOBAL:26,KEY_VALUE_PAIR:27,REFERENCE:30,REFINEMENT:31,MEMBER:32,PREFIX_OPERATOR:33,BRACKETED:34,CONDITIONAL:35,INFIX_OPERATOR:36,INVOCATION:40,SECTION_IF:50,SECTION_UNLESS:51,SECTION_EACH:52,SECTION_WITH:53},L=function Te(a,b,c){var d,e,f;if(c||(e=a._wrapped[b])&&e.teardown()!==!1&&(a._wrapped[b]=null),(f=a._computations[b])&&f.compute(),a._cache[b]=void 0,d=a._cacheMap[b])for(;d.length;)Te(a,d.pop())},M=function(){var a=/^\s*[0-9]+\s*$/;return function(b){return a.test(b)?[]:{}}}(),N=function(a,b,c,d,e){function f(a,h,i,j){var k,l,m,n,o,p,q,r;b(a._cache[h],i)||(o=a._computations[h],p=a._wrapped[h],q=a._evaluators[h],o&&!o.setting&&o.set(i),p&&p.reset&&(r=p.reset(i)!==!1,r&&(i=p.get())),q&&(q.value=i),o||q||r||(k=h.split("."),l=k.pop(),m=k.join("."),p=a._wrapped[m],p&&p.set?p.set(l,i):(n=p?p.get():g(a,m),n||(n=c(l),f(a,m,n,!0)),n[l]=i)),d(a,h,r),j||(a._changes.push(h),e(a,h)))}var g;return a.push(function(){g=a.get}),a.set=f,f}(t,n,M,L,B),O=function(a,b,c,d){return function(e,f,g,h){var i,j,k,l,m,n;if(i=e.root,j=e.keypath,i._changes.push(j),"sort"===g||"reverse"===g)return void d(i,j,f);if(h){for(l=h.rangeStart;l<h.clearEnd;l+=1)b(i,j+"."+l);if(i._patternObservers.length&&(n=i._patternObservers.filter(function(a){return a.regex.test(j+".x")}),n.length&&n.forEach(function(a){var b;for(b=h.rangeStart;b<h.rangeEnd;b+=1)a.update(j+"."+b)})),k=function(b){b.keypath===j&&b.type===a.SECTION&&!b.inverted&&b.docFrag?b.splice(h):b.update()},i._deps.forEach(function(a){var b=a[j];b&&b.forEach(k)}),h.added&&h.removed)for(l=h.rangeStart;l<h.rangeEnd;l+=1)m=j+"."+l,c(i,m);h.balance&&(b(i,j+".length"),c(i,j+".length",!0))}}}(K,L,B,N),P=function(a,b,c,d,e){var f,g,h,i=[],j=["pop","push","reverse","shift","sort","splice","unshift"];return j.forEach(function(f){var g=function(){var b,g,h,i,j;for(b=c(this,f,Array.prototype.slice.call(arguments)),g=d(this,b),h=Array.prototype[f].apply(this,arguments),this._ractive.setting=!0,j=this._ractive.wrappers.length;j--;)i=this._ractive.wrappers[j],a.start(i.root),e(i,this,f,g),a.end();return this._ractive.setting=!1,h};b(i,f,{value:g})}),f={},f.__proto__?(g=function(a){a.__proto__=i},h=function(a){a.__proto__=Array.prototype}):(g=function(a){var c,d;for(c=j.length;c--;)d=j[c],b(a,d,{value:i[d],configurable:!0})},h=function(a){var b;for(b=j.length;b--;)delete a[j[b]]}),g.unpatch=h,g}(D,i,I,J,O),Q=function(a,b,c){var d,e,f;return d={filter:function(a){return b(a)&&(!a._ractive||!a._ractive.setting)},wrap:function(a,b,c){return new e(a,b,c)}},e=function(b,d,e){this.root=b,this.value=d,this.keypath=e,d._ractive||(a(d,"_ractive",{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),c(d)),d._ractive.instances[b._guid]||(d._ractive.instances[b._guid]=0,d._ractive.instances.push(b)),d._ractive.instances[b._guid]+=1,d._ractive.wrappers.push(this)},e.prototype={get:function(){return this.value},teardown:function(){var a,b,d,e,g;if(a=this.value,b=a._ractive,d=b.wrappers,e=b.instances,b.setting)return!1;if(g=d.indexOf(this),-1===g)throw new Error(f);if(d.splice(g,1),d.length){if(e[this.root._guid]-=1,!e[this.root._guid]){if(g=e.indexOf(this.root),-1===g)throw new Error(f);e.splice(g,1)}}else delete a._ractive,c.unpatch(this.value)}},f="Something went wrong in a rather interesting way",d}(i,F,P),R=function(a,b,c,d,e){function f(b,c,f){function g(b){var f,g;b.value=c,b.updating||(g=b.ractive,f=b.keypath,b.updating=!0,a.start(g),g._changes.push(f),d(g,f),e(g,f),a.end(),b.updating=!1)}var h,i,j,k,l,m;if(h=b.obj,i=b.prop,f&&!f.configurable){if("length"===i)return;throw new Error('Cannot use magic mode with property "'+i+'" - object is not configurable')}f&&(j=f.get,k=f.set),l=j||function(){return c},m=function(a){k&&k(a),c=j?j():a,m._ractiveWrappers.forEach(g)},m._ractiveWrappers=[b],Object.defineProperty(h,i,{get:l,set:m,enumerable:!0,configurable:!0})}var g,h;try{Object.defineProperty({},"test",{value:0}),g={filter:function(a,b,d){var e,f,g,h,i;return b?(e=b.split("."),f=e.pop(),g=e.join("."),(h=d._wrapped[g])&&!h.magic?!1:(i=d.get(g),c(i)&&/^[0-9]+$/.test(f)?!1:i&&("object"==typeof i||"function"==typeof i))):!1},wrap:function(a,b,c){return new h(a,b,c)}},h=function(a,b,c){var d,e,g,h;return this.magic=!0,this.ractive=a,this.keypath=c,this.value=b,d=c.split("."),this.prop=d.pop(),e=d.join("."),this.obj=e?a.get(e):a.data,g=this.originalDescriptor=Object.getOwnPropertyDescriptor(this.obj,this.prop),g&&g.set&&(h=g.set._ractiveWrappers)?void(-1===h.indexOf(this)&&h.push(this)):void f(this,b,g)},h.prototype={get:function(){return this.value},reset:function(a){this.updating||(this.updating=!0,this.obj[this.prop]=a,d(this.ractive,this.keypath),this.updating=!1)},set:function(a,c){this.updating||(this.obj[this.prop]||(this.updating=!0,this.obj[this.prop]=b(a),this.updating=!1),this.obj[this.prop][a]=c)},teardown:function(){var a,b,c,d,e;return this.updating?!1:(a=Object.getOwnPropertyDescriptor(this.obj,this.prop),b=a&&a.set,void(b&&(d=b._ractiveWrappers,e=d.indexOf(this),-1!==e&&d.splice(e,1),d.length||(c=this.obj[this.prop],Object.defineProperty(this.obj,this.prop,this.originalDescriptor||{writable:!0,enumerable:!0,configurable:!0}),this.obj[this.prop]=c))))}}}catch(i){g=!1}return g}(D,M,F,L,B),S=function(a,b){var c,d;return a&&(c={filter:function(c,d,e){return a.filter(c,d,e)&&b.filter(c)},wrap:function(a,b,c){return new d(a,b,c)}},d=function(c,d,e){this.value=d,this.magic=!0,this.magicWrapper=a.wrap(c,d,e),this.arrayWrapper=b.wrap(c,d,e)},d.prototype={get:function(){return this.value},teardown:function(){this.arrayWrapper.teardown(),this.magicWrapper.teardown()},reset:function(a){return this.magicWrapper.reset(a)}}),c}(R,Q),T=function(a,b,c,d){function e(a,b){var c,d={};if(!b)return a;b+=".";for(c in a)a.hasOwnProperty(c)&&(d[b+c]=a[c]);return d}function f(a){var b;return g[a]||(b=a?a+".":"",g[a]=function(c,d){var f;return"string"==typeof c?(f={},f[b+c]=d,f):"object"==typeof c?b?e(c,a):c:void 0}),g[a]}var g={};return function(e,g,h,i){var j,k,l,m;for(j=e.adapt.length,k=0;j>k;k+=1){if(l=e.adapt[k],"string"==typeof l){if(!a[l])throw new Error('Missing adaptor "'+l+'"');l=e.adapt[k]=a[l]}if(l.filter(h,g,e))return m=e._wrapped[g]=l.wrap(e,h,g,f(g)),m.value=h,h}return i||(e.magic?d.filter(h,g,e)?e._wrapped[g]=d.wrap(e,h,g):c.filter(h,g,e)&&(e._wrapped[g]=c.wrap(e,h,g)):e.modifyArrays&&b.filter(h,g,e)&&(e._wrapped[g]=b.wrap(e,h,g))),h}}(H,Q,R,S),U=function(){function a(a,b){var c,d,e;for(c=b.split(".");c.length;)c.pop(),d=c.join("."),e=a._depsMap[d]||(a._depsMap[d]=[]),void 0===e[b]&&(e[b]=0,e[e.length]=b),e[b]+=1,b=d}return function(b){var c,d,e,f,g;e=b.root,f=b.keypath,g=b.priority,c=e._deps[g]||(e._deps[g]={}),d=c[f]||(c[f]=[]),d.push(b),b.registered=!0,f&&a(e,f)}}(),V=function(){function a(a,b){var c,d,e;for(c=b.split(".");c.length;)c.pop(),d=c.join("."),e=a._depsMap[d],e[b]-=1,e[b]||(e.splice(e.indexOf(b),1),e[b]=void 0),b=d}return function(b){var c,d,e,f,g;if(e=b.root,f=b.keypath,g=b.priority,c=e._deps[g][f],d=c.indexOf(b),-1===d||!b.registered)throw new Error("Attempted to remove a dependant that was no longer registered! This should not happen. If you are seeing this bug in development please raise an issue at https://github.com/RactiveJS/Ractive/issues - thanks");c.splice(d,1),b.registered=!1,f&&a(e,f)}}(),W=function(a,b,c,d,e,f){var g,h;a.push(function(){g=a.get,h=a.set});var i=function(a,b,c,d,f){this.root=a,this.keypath=b,this.priority=f,this.otherInstance=c,this.otherKeypath=d,e(this),this.value=g(this.root,this.keypath)};return i.prototype={update:function(){var a;this.updating||this.counterpart&&this.counterpart.updating||(a=g(this.root,this.keypath),c(a)&&a._ractive&&a._ractive.setting||d(a,this.value)||(this.updating=!0,b.addInstance(this.otherInstance),h(this.otherInstance,this.otherKeypath,a),this.value=a,this.updating=!1))},reassign:function(a){f(this),f(this.counterpart),this.keypath=a,this.counterpart.otherKeypath=a,e(this),e(this.counterpart)},teardown:function(){f(this)}},function(a,b,c,d){var e,f,g,h,j,k;e=c+"="+d,g=a.bindings,g[e]||(g[e]=!0,f=a.instance,h=a.parentFragment.priority,j=new i(b,c,f,d,h),g.push(j),f.twoway&&(k=new i(f,d,b,c,1),g.push(k),j.counterpart=k,k.counterpart=j))}}(t,D,F,n,U,V),X=function(a,b,c){function d(a,d,e,f,g){c(d,f,g,!0),b(d.component,a,e,f)}var e;return a.push(function(){e=a.get}),function(a,b){var c,f,g,h,i;if(c=a._parent,f=a.component.parentFragment,f.indexRefs&&void 0!==(i=f.indexRefs[b]))return a.component.indexRefBindings[b]=b,i;do if(f.context&&(g=f.context+"."+b,h=e(c,g),void 0!==h))return d(c,a,g,b,h),h;while(f=f.parent);return h=e(c,b),void 0!==h?(d(c,a,b,b,h),h):void 0}}(t,W,N),Y={FAILED_LOOKUP:!0},Z=function(a,b,c,d,e,f){function g(a,b,c){var g,i,j,k,l=a._cache;return void 0===l[b]?((i=a._computations[b])?g=i.value:(j=a._wrapped[b])?g=j.value:b?g=(k=a._evaluators[b])?k.value:h(a,b):(d(a,"",a.data),g=a.data),l[b]=g):g=l[b],g===f&&(g=a._parent&&!a.isolated?e(a,b,c):void 0),c&&c.evaluateWrapped&&(j=a._wrapped[b])&&(g=j.get()),g}function h(a,e){var h,i,j,k,l,m,n,o;return h=e.split("."),i=h.pop(),j=h.join("."),k=g(a,j),(n=a._wrapped[j])&&(k=n.get()),null!==k&&void 0!==k?((l=a._cacheMap[j])?-1===l.indexOf(e)&&l.push(e):a._cacheMap[j]=[e],"object"!=typeof k||i in k?(o=!b.call(k,i),m=o?c(k[i]):k[i],m=d(a,e,m,!1),a._cache[e]=m,m):a._cache[e]=f):void 0}return a.get=g,g}(t,x,G,T,X,Y),$=function(){var a;return a="undefined"!=typeof console&&"function"==typeof console.warn&&"function"==typeof console.warn.apply?function(){console.warn.apply(console,arguments)}:function(){}}(),_=function(){var a=Object.prototype.toString;return function(b){return b&&"[object Object]"===a.call(b)}}(),ab=function(a,b,c,d,e){var f,g,h;return a.push(function(){g=a.interpolate}),h=/^([+-]?[0-9]+\.?(?:[0-9]+)?)(px|em|ex|%|in|cm|mm|pt|pc)$/,f={number:function(a,b){var c;return e(a)&&e(b)?(a=+a,b=+b,c=b-a,c?function(b){return a+b*c}:function(){return a}):null},array:function(a,b){var d,e,f,h;if(!c(a)||!c(b))return null;for(d=[],e=[],h=f=Math.min(a.length,b.length);h--;)e[h]=g(a[h],b[h]);for(h=f;h<a.length;h+=1)d[h]=a[h];for(h=f;h<b.length;h+=1)d[h]=b[h];return function(a){for(var b=f;b--;)d[b]=e[b](a);return d}},object:function(a,c){var e,f,h,i,j;if(!d(a)||!d(c))return null;e=[],i={},h={};for(j in a)b.call(a,j)&&(b.call(c,j)?(e.push(j),h[j]=g(a[j],c[j])):i[j]=a[j]);for(j in c)b.call(c,j)&&!b.call(a,j)&&(i[j]=c[j]);return f=e.length,function(a){for(var b,c=f;c--;)b=e[c],i[b]=h[b](a);return i}},cssLength:function(a,b){var c,d,e,f,g,i,j,k;return 0!==a&&"string"!=typeof a||0!==b&&"string"!=typeof b?null:(c=h.exec(a),d=h.exec(b),e=c?c[2]:"",f=d?d[2]:"",e&&f&&e!==f?null:(j=e||f,g=c?+c[1]:0,i=d?+d[1]:0,k=i-g,k?function(a){return g+a*k+j}:function(){return g+j}))}}}(t,x,F,_,k),bb=function(a,b,c){function d(a){return function(){return a}}var e=function(a,e,f,g){if(a===e)return d(e);if(g){if(f.interpolators[g])return f.interpolators[g](a,e)||d(e);b('Missing "'+g+'" interpolator. You may need to download a plugin from [TODO]')}return c.number(a,e)||c.array(a,e)||c.object(a,e)||c.cssLength(a,e)||d(e)};return a.interpolate=e,e}(t,$,ab),cb=function(a,b,c,d){var e=function(a){var b;this.startTime=Date.now();for(b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);this.interpolator=c(this.from,this.to,this.root,this.interpolator),this.running=!0};return e.prototype={tick:function(){var c,e,f,g,h,i;return i=this.keypath,this.running?(g=Date.now(),c=g-this.startTime,c>=this.duration?(null!==i&&(b.start(this.root),d(this.root,i,this.to),b.end()),this.step&&this.step(1,this.to),this.complete(this.to),h=this.root._animations.indexOf(this),-1===h&&a("Animation was not found"),this.root._animations.splice(h,1),this.running=!1,!1):(e=this.easing?this.easing(c/this.duration):c/this.duration,null!==i&&(f=this.interpolator(e),b.start(this.root),d(this.root,i,f),b.end()),this.step&&this.step(e,f),!0)):!1},stop:function(){var b;this.running=!1,b=this.root._animations.indexOf(this),-1===b&&a("Animation was not found"),this.root._animations.splice(b,1)}},e}($,D,bb,N),db=function(a,b,c,d,e,f){function g(b,g,h,j){var k,l,m,n;return g&&(g=c(g)),null!==g&&(n=e(b,g)),d.abort(g,b),a(n,h)?(j.complete&&j.complete(j.to),i):(j.easing&&(k="function"==typeof j.easing?j.easing:b.easing[j.easing],"function"!=typeof k&&(k=null)),l=void 0===j.duration?400:j.duration,m=new f({keypath:g,from:n,to:h,root:b,duration:l,easing:k,interpolator:j.interpolator,step:j.step,complete:j.complete}),d.add(m),b._animations.push(m),m)}var h=function(){},i={stop:h};return function(a,c,d){var e,f,i,j,k,l,m,n,o,p,q,r,s,t;if(e=new b(function(a){f=a}),"object"==typeof a){d=c||{},l=d.easing,m=d.duration,k=[],n=d.step,o=d.complete,(n||o)&&(q={},d.step=null,d.complete=null,p=function(a){return function(b,c){q[a]=c}});for(i in a)a.hasOwnProperty(i)&&((n||o)&&(r=p(i),d={easing:l,duration:m},n&&(d.step=r)),d.complete=o?r:h,k.push(g(this,i,a[i],d)));return(n||o)&&(t={easing:l,duration:m},n&&(t.step=function(a){n(a,q)}),o&&e.then(function(a){o(a,q)}),t.complete=f,s=g(this,null,null,t),k.push(s)),{stop:function(){for(var a;a=k.pop();)a.stop();s&&s.stop()}}}return d=d||{},d.complete&&e.then(d.complete),d.complete=f,j=g(this,a,c,d),e.stop=function(){j.stop()},e}}(n,o,p,E,Z,cb),eb=function(){return this.fragment.detach()},fb=function(a){return this.el?this.fragment.find(a):null},gb=function(a,b,c){var d,e,f,g,h,i,j,k;if(a){for(e=c("div"),f=["matches","matchesSelector"],k=function(a){return function(b,c){return b[a](c)}},i=f.length;i--&&!d;)if(g=f[i],e[g])d=k(g);else for(j=b.length;j--;)if(h=b[i]+g.substr(0,1).toUpperCase()+g.substring(1),e[h]){d=k(h);break}d||(d=function(a,b){var c,d;for(c=(a.parentNode||a.document).querySelectorAll(b),d=c.length;d--;)if(c[d]===a)return!0;return!1})}else d=null;return d}(h,q,g),hb=function(a){return function(b,c){var d=this._isComponentQuery?!this.selector||b.name===this.selector:a(b.node,this.selector);return d?(this.push(b.node||b.instance),c||this._makeDirty(),!0):void 0}}(gb),ib=function(){var a,b,c;a=this._root[this._isComponentQuery?"liveComponentQueries":"liveQueries"],b=this.selector,c=a.indexOf(b),-1!==c&&(a.splice(c,1),a[b]=null)},jb=function(){function a(a){var b;return(b=a.parentFragment)?b.owner:a.component&&(b=a.component.parentFragment)?b.owner:void 0}function b(b){var c,d;for(c=[b],d=a(b);d;)c.push(d),d=a(d);return c}return function(a,c){var d,e,f,g,h,i,j,k,l,m;for(d=b(a.component||a._ractive.proxy),e=b(c.component||c._ractive.proxy),f=d[d.length-1],g=e[e.length-1];f&&f===g;)d.pop(),e.pop(),h=f,f=d[d.length-1],g=e[e.length-1];if(f=f.component||f,g=g.component||g,l=f.parentFragment,m=g.parentFragment,l===m)return i=l.items.indexOf(f),j=m.items.indexOf(g),i-j||d.length-e.length;if(k=h.fragments)return i=k.indexOf(l),j=k.indexOf(m),i-j||d.length-e.length;throw new Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/RactiveJS/Ractive/issues - thanks!")}}(),kb=function(a){return function(b,c){var d;return b.compareDocumentPosition?(d=b.compareDocumentPosition(c),2&d?1:-1):a(b,c)}}(jb),lb=function(a,b){return function(){this.sort(this._isComponentQuery?b:a),this._dirty=!1}}(kb,jb),mb=function(a){return function(){this._dirty||(a.addLiveQuery(this),this._dirty=!0)}}(D),nb=function(a){var b=this.indexOf(this._isComponentQuery?a.instance:a);-1!==b&&this.splice(b,1)},ob=function(a,b,c,d,e,f){return function(g,h,i,j){var k=[];return a(k,{selector:{value:h},live:{value:i},_isComponentQuery:{value:j},_test:{value:b}}),i?(a(k,{cancel:{value:c},_root:{value:g},_sort:{value:d},_makeDirty:{value:e},_remove:{value:f},_dirty:{value:!1,writable:!0}}),k):k}}(j,hb,ib,lb,mb,nb),pb=function(a){return function(b,c){var d,e;return this.el?(c=c||{},d=this._liveQueries,(e=d[b])?c&&c.live?e:e.slice():(e=a(this,b,!!c.live,!1),e.live&&(d.push(b),d["_"+b]=e),this.fragment.findAll(b,e),e)):[]}}(ob),qb=function(a){return function(b,c){var d,e;return c=c||{},d=this._liveComponentQueries,(e=d[b])?c&&c.live?e:e.slice():(e=a(this,b,!!c.live,!0),e.live&&(d.push(b),d["_"+b]=e),this.fragment.findAllComponents(b,e),e)}}(ob),rb=function(a){return this.fragment.findComponent(a)},sb=function(a){var b,c,d,e=this._subs[a];if(e)for(b=Array.prototype.slice.call(arguments,1),c=0,d=e.length;d>c;c+=1)e[c].apply(this,b)},tb=function(a,b,c,d){var e,f={};a.push(function(){e=a.get});var g=function(a,b){this.root=a,this.ref=b,this.parentFragment=f,a._unresolvedImplicitDependencies[b]=!0,a._unresolvedImplicitDependencies.push(this),c.addUnresolved(this)};return g.prototype={resolve:function(){var a=this.root;d(a,this.ref),a._unresolvedImplicitDependencies[this.ref]=!1,b(a._unresolvedImplicitDependencies,this)},teardown:function(){c.removeUnresolved(this)}},g}(t,u,D,B),ub=function(a,b,c){var d={isTopLevel:!0};return function(e){var f;return e=a(e),f=b(this,e,d),this._captured&&this._captured[e]!==!0&&(this._captured.push(e),this._captured[e]=!0,void 0===f&&this._unresolvedImplicitDependencies[e]!==!0&&new c(this,e)),f}}(p,Z,tb),vb=function(a){var b;if(a&&"boolean"!=typeof a)return"undefined"!=typeof window&&document&&a?a.nodeType?a:"string"==typeof a&&(b=document.getElementById(a),!b&&document.querySelector&&(b=document.querySelector(a)),b&&b.nodeType)?b:a[0]&&a[0].nodeType?a[0]:null:null},wb=function(a){return function(b,c){if(b=a(b),c=a(c)||null,!b)throw new Error("You must specify a valid target to insert into");b.insertBefore(this.detach(),c),this.fragment.pNode=this.el=b}}(vb),xb=function(a,b){var c,d,e,f;return c={},d=0,e=a.map(function(a,e){var g,h,i;h=d,i=b.length;do{if(g=b.indexOf(a,h),-1===g)return f=!0,-1;h=g+1}while(c[g]&&i>h);return g===d&&(d+=1),g!==e&&(f=!0),c[g]=!0,g}),e.unchanged=!f,e},yb=function(a,b){return function(c,d,e,f){var g;c._changes.push(d),g=function(b){b.type===a.REFERENCE?b.update():b.keypath===d&&b.type===a.SECTION&&!b.inverted&&b.docFrag?b.merge(e):b.update()},c._deps.forEach(function(a){var b=a[d];b&&b.forEach(g)}),f||b(c,d+".length",!0)}}(K,B),zb=function(a,b,c,d,e,f,g){function h(a){return JSON.stringify(a)}function i(a){if(a===!0)return h;if("string"==typeof a)return j[a]||(j[a]=function(b){return b[a]}),j[a];if("function"==typeof a)return a;throw new Error("The `compare` option must be a function, or a string representing an identifying field (or `true` to use JSON.stringify)")}var j={};return function(h,j,k){var l,m,n,o,p,q,r,s;if(l=this.get(h),!c(l)||!c(j))return this.set(h,j,k&&k.complete);if(p=l.length===j.length,k&&k.compare){o=i(k.compare);try{m=l.map(o),n=j.map(o)}catch(t){if(this.debug)throw t;b("Merge operation: comparison failed. Falling back to identity checking"),m=l,n=j}}else m=l,n=j;return q=f(m,n),r=new d(function(a){s=a}),a.start(this,s),e(this,h,j,!0),g(this,h,q,p),a.end(),k&&k.complete&&r.then(k.complete),r}}(D,$,F,o,N,xb,yb),Ab=function(a,b,c){var d=function(a,b,c,d){var e=this;this.root=a,this.keypath=b,this.callback=c,this.defer=d.defer,this.debug=d.debug,this.proxy={update:function(){e.reallyUpdate()}},this.priority=0,this.context=d&&d.context?d.context:a};return d.prototype={init:function(a){a!==!1?this.update():this.value=c(this.root,this.keypath)},update:function(){return this.defer&&this.ready?void a.addObserver(this.proxy):void this.reallyUpdate()},reallyUpdate:function(){var a,d;if(a=this.value,d=c(this.root,this.keypath),this.value=d,!this.updating){if(this.updating=!0,!b(d,a)||!this.ready)try{this.callback.call(this.context,d,a,this.keypath)}catch(e){if(this.debug||this.root.debug)throw e}this.updating=!1}}},d}(D,n,Z),Bb=function(a){return function(b,c){var d,e,f,g,h,i,j;for(d=c.split("."),g=[""],i=function(c){var d,e,f;d=b._wrapped[c]?b._wrapped[c].get():b.get(c);for(e in d)!d.hasOwnProperty(e)||"_ractive"===e&&a(d)||(f=c?c+"."+e:e,h.push(f))},j=function(a){return a+"."+e};e=d.shift();)"*"===e?(h=[],g.forEach(i),g=h):g[0]?g=g.map(j):g[0]=e;return f={},g.forEach(function(a){f[a]=b.get(a)}),f}}(F),Cb=function(a,b,c,d,e){var f,g=/\*/,h=Array.prototype.slice;return f=function(a,b,c,d){this.root=a,this.callback=c,this.defer=d.defer,this.debug=d.debug,this.keypath=b,this.regex=new RegExp("^"+b.replace(/\./g,"\\.").replace(/\*/g,"([^\\.]+)")+"$"),this.values={},this.defer&&(this.proxies=[]),this.priority="pattern",this.context=d&&d.context?d.context:a},f.prototype={init:function(a){var b,c;if(b=e(this.root,this.keypath),a!==!1)for(c in b)b.hasOwnProperty(c)&&this.update(c);else this.values=b},update:function(b){var f,h;if(g.test(b)){f=e(this.root,b);for(b in f)f.hasOwnProperty(b)&&this.update(b)}else if(!(".length"===b.substr(-7)&&(h=d(this.root,b.substr(0,b.length-7)),c(h)&&h._ractive&&h._ractive.setting)))return this.defer&&this.ready?void a.addObserver(this.getProxy(b)):void this.reallyUpdate(b)},reallyUpdate:function(a){var c,e,f;if(c=d(this.root,a),this.updating)return void(this.values[a]=c);if(this.updating=!0,!b(c,this.values[a])||!this.ready){e=h.call(this.regex.exec(a),1),f=[c,this.values[a],a].concat(e);
try{this.callback.apply(this.context,f)}catch(g){if(this.debug||this.root.debug)throw g}this.values[a]=c}this.updating=!1},getProxy:function(a){var b=this;return this.proxies[a]||(this.proxies[a]={update:function(){b.reallyUpdate(a)}}),this.proxies[a]}},f}(D,n,F,Z,Bb),Db=function(a,b,c,d,e){var f=/\*/,g={};return function(h,i,j,k){var l,m;return i=a(i),k=k||g,f.test(i)?(l=new e(h,i,j,k),h._patternObservers.push(l),m=!0):l=new d(h,i,j,k),b(l),l.init(k.init),l.ready=!0,{cancel:function(){var a;m&&(a=h._patternObservers.indexOf(l),-1!==a&&h._patternObservers.splice(a,1)),c(l)}}}}(p,U,V,Ab,Cb),Eb=function(a,b){return function(c,d,e){var f,g,h,i;if(a(c)){e=d,g=c,f=[];for(c in g)g.hasOwnProperty(c)&&(d=g[c],f.push(this.observe(c,d,e)));return{cancel:function(){for(;f.length;)f.pop().cancel()}}}if("function"==typeof c)return e=d,d=c,c="",b(this,c,d,e);if(h=c.split(" "),1===h.length)return b(this,c,d,e);for(f=[],i=h.length;i--;)c=h[i],c&&f.push(b(this,c,d,e));return{cancel:function(){for(;f.length;)f.pop().cancel()}}}}(_,Db),Fb=function(a,b){var c,d;if(!b)if(a)this._subs[a]=[];else for(a in this._subs)delete this._subs[a];c=this._subs[a],c&&(d=c.indexOf(b),-1!==d&&c.splice(d,1))},Gb=function(a,b){var c,d,e=this;if("object"==typeof a){c=[];for(d in a)a.hasOwnProperty(d)&&c.push(this.on(d,a[d]));return{cancel:function(){for(var a;a=c.pop();)a.cancel()}}}return this._subs[a]?this._subs[a].push(b):this._subs[a]=[b],{cancel:function(){e.off(a,b)}}},Hb=function(){var a;try{Object.create(null),a=Object.create}catch(b){a=function(){var a=function(){};return function(b,c){var d;return null===b?{}:(a.prototype=b,d=new a,c&&Object.defineProperties(d,c),d)}}()}return a}(),Ib=function(a,b){return function(c,d){var e,f,g,h,i;if(c.owner=d.owner,g=c.parent=c.owner.parentFragment,c.root=d.root,c.pNode=d.pNode,c.pElement=d.pElement,c.context=d.context,c.owner.type===a.SECTION&&(c.index=d.index),g&&(h=g.indexRefs)){c.indexRefs=b(null);for(i in h)c.indexRefs[i]=h[i]}for(c.priority=g?g.priority+1:1,d.indexRef&&(c.indexRefs||(c.indexRefs={}),c.indexRefs[d.indexRef]=d.index),c.items=[],e=d.descriptor?d.descriptor.length:0,f=0;e>f;f+=1)c.items[c.items.length]=c.createItem({parentFragment:c,pElement:d.pElement,descriptor:d.descriptor[f],index:f})}}(K,Hb),Jb=function(a,b){return a.substr(0,b.length+1)===b+"."},Kb=function(a){return function(b,c){return b===c||a(b,c)}}(Jb),Lb=function(a){return function(b,c,d){return b===c?d:a(b,c)?b.replace(c+".",d+"."):void 0}}(Jb),Mb=function(a,b){return function(c,d,e,f){c[d]&&!a(c[d],f)&&(c[d]=b(c[d],e,f))}}(Kb,Lb),Nb=function(a){return function(b,c,d,e){a(this,"context",d,e),this.indexRefs&&void 0!==this.indexRefs[b]&&this.indexRefs[b]!==c&&(this.indexRefs[b]=c),this.items.forEach(function(a){a.reassign(b,c,d,e)})}}(Mb),Ob=function(a,b){return{init:a,reassign:b}}(Ib,Nb),Pb=function(){var a,b=this.node;return b&&(a=b.parentNode)?(a.removeChild(b),b):void 0},Qb=function(a,b){var c,d,e;return d=/</g,e=/>/g,c=function(b,c){this.type=a.TEXT,this.descriptor=b.descriptor,c&&(this.node=document.createTextNode(b.descriptor),c.appendChild(this.node))},c.prototype={detach:b,reassign:function(){},teardown:function(a){a&&this.detach()},firstNode:function(){return this.node},toString:function(){return(""+this.descriptor).replace(d,"&lt;").replace(e,"&gt;")}},c}(K,Pb),Rb=function(a,b){return function(c){c.keypath?b(c):a.removeUnresolved(c)}}(D,V),Sb=function(a){var b=function(b,c,d,e){this.root=b,this.ref=c,this.parentFragment=d,this.resolve=e,a.addUnresolved(this)};return b.prototype={teardown:function(){a.removeUnresolved(this)}},b}(D),Tb=function(a,b,c,d,e){function f(a,b,d){var e,f,g;if(!h.test(a.toString()))return c(a,"_nowrap",{value:!0}),a;if(!a["_"+b._guid]){c(a,"_"+b._guid,{value:function(){var c,d,e,g;if(c=b._captured,c||(b._captured=[]),d=a.apply(b,arguments),b._captured.length)for(e=f.length;e--;)g=f[e],g.updateSoftDependencies(b._captured);return b._captured=c,d},writable:!0});for(e in a)a.hasOwnProperty(e)&&(a["_"+b._guid][e]=a[e]);a["_"+b._guid+"_evaluators"]=[]}return f=a["_"+b._guid+"_evaluators"],g=f.indexOf(d),-1===g&&f.push(d),a["_"+b._guid]}var g,h;return h=/this/,g=function(b,c,e,g,h){var i;this.evaluator=e,this.keypath=c,this.root=b,this.argNum=g,this.type=a.REFERENCE,this.priority=h,i=b.get(c),"function"!=typeof i||i._nowrap||(i=f(i,b,e)),this.value=e.values[g]=i,d(this)},g.prototype={update:function(){var a=this.root.get(this.keypath);"function"!=typeof a||a._nowrap||(a=f(a,this.root,this.evaluator)),b(a,this.value)||(this.evaluator.values[this.argNum]=a,this.evaluator.bubble(),this.value=a)},teardown:function(){e(this)}},g}(K,n,i,U,V),Ub=function(a,b,c){var d=function(a,c,d){this.root=a,this.keypath=c,this.priority=d.priority,this.evaluator=d,b(this)};return d.prototype={update:function(){var b=this.root.get(this.keypath);a(b,this.value)||(this.evaluator.bubble(),this.value=b)},teardown:function(){c(this)}},d}(n,U,V),Vb=function(a,b,c,d,e,f,g,h){function i(a,b){var c,d;if(a=a.replace(/\$\{([0-9]+)\}/g,"_$1"),k[a])return k[a];for(d=[];b--;)d[b]="_"+b;return c=new Function(d.join(","),"return("+a+")"),k[a]=c,c}var j,k={};return j=function(a,b,c,d,e,f){var h=this;h.root=a,h.uniqueString=c,h.keypath=b,h.priority=f,h.fn=i(d,e.length),h.values=[],h.refs=[],e.forEach(function(b,c){b&&(b.indexRef?h.values[c]=b.value:h.refs.push(new g(a,b.keypath,h,c,f)))}),h.selfUpdating=h.refs.length<=1},j.prototype={bubble:function(){this.selfUpdating?this.update():this.deferred||(a.addEvaluator(this),this.deferred=!0)},update:function(){var a;if(this.evaluating)return this;this.evaluating=!0;try{a=this.fn.apply(null,this.values)}catch(g){this.root.debug&&b('Error evaluating "'+this.uniqueString+'": '+g.message||g),a=void 0}return c(a,this.value)||(this.value=a,d(this.root,this.keypath),f(this.root,this.keypath,a,!0),e(this.root,this.keypath)),this.evaluating=!1,this},teardown:function(){for(;this.refs.length;)this.refs.pop().teardown();d(this.root,this.keypath),this.root._evaluators[this.keypath]=null},refresh:function(){this.selfUpdating||(this.deferred=!0);for(var a=this.refs.length;a--;)this.refs[a].update();this.deferred&&(this.update(),this.deferred=!1)},updateSoftDependencies:function(a){var b,c,d;for(this.softRefs||(this.softRefs=[]),b=this.softRefs.length;b--;)d=this.softRefs[b],a[d.keypath]||(this.softRefs.splice(b,1),this.softRefs[d.keypath]=!1,d.teardown());for(b=a.length;b--;)c=a[b],this.softRefs[c]||(d=new h(this.root,c,this),this.softRefs.push(d),this.softRefs[c]=!0);this.selfUpdating=this.refs.length+this.softRefs.length<=1}},j}(D,$,n,L,B,T,Tb,Ub),Wb=function(a,b,c,d,e){function f(a,b){return a.replace(/\$\{([0-9]+)\}/g,function(a,c){return b[c]?b[c].value||b[c].keypath:"undefined"})}function g(a){return"${"+a.replace(/[\.\[\]]/g,"-")+"}"}var h=function(d,e,f,g){var h,i,j,k=this;return h=d.root,this.root=h,this.callback=g,this.owner=d,this.str=f.s,this.args=j=[],this.unresolved=[],this.pending=0,i=e.indexRefs,f.r&&f.r.length?(f.r.forEach(function(d,f){var g,l,m;return i&&void 0!==(g=i[d])?void(j[f]={indexRef:d,value:g}):(l=b(h,d,e))?void(j[f]={keypath:l}):(j[f]=null,k.pending+=1,m=new c(h,d,e,function(b){k.resolve(f,b),a(k.unresolved,m)}),void k.unresolved.push(m))}),this.ready=!0,void this.bubble()):(this.resolved=this.ready=!0,void this.bubble())};return h.prototype={bubble:function(){this.ready&&(this.uniqueString=f(this.str,this.args),this.keypath=g(this.uniqueString),this.createEvaluator(),this.callback(this.keypath))},teardown:function(){for(var a;a=this.unresolved.pop();)a.teardown()},resolve:function(a,b){this.args[a]={keypath:b},this.bubble(),this.resolved=!--this.pending},createEvaluator:function(){var a;this.root._evaluators[this.keypath]?this.root._evaluators[this.keypath].refresh():(a=new d(this.root,this.keypath,this.uniqueString,this.str,this.args,this.owner.priority),this.root._evaluators[this.keypath]=a,a.update())},reassign:function(a,b,c,d){var f;this.args.forEach(function(g){var h;g&&(g.keypath&&(h=e(g.keypath,c,d))?(g.keypath=h,f=!0):g.indexRef===a&&(g.value=b,f=!0))}),f&&this.bubble()}},h}(u,z,Sb,Vb,Lb),Xb=function(a,b,c,d,e,f,g){var h=function(e,f,h){var j,k,l,m,n,o=this;return j=e.root,k=e.parentFragment,this.ref=f.r,this.root=e.root,this.mustache=e,this.callback=h,this.pending=0,this.unresolved=[],n=this.members=[],this.indexRefMembers=[],this.keypathObservers=[],this.expressionResolvers=[],f.m.forEach(function(f,h){var p,q,r,s,t,u;return"string"==typeof f?void(o.members[h]=f):f.t===a.REFERENCE?(p=f.n,q=k.indexRefs,q&&void 0!==(r=q[p])?(n[h]=r,void o.indexRefMembers.push({ref:p,index:h})):(m=!0,(l=c(j,p,k))?(s=new i(j,l,e.priority,o,h),void o.keypathObservers.push(s)):(n[h]=void 0,o.pending+=1,t=new d(j,p,k,function(a){o.resolve(h,a),b(o.unresolved,t)}),o.unresolved.push(t),null))):(m=!0,o.pending+=1,u=new g(o,k,f,function(a){o.resolve(h,a),b(o.unresolved,u)}),void o.unresolved.push(u))}),m?(this.ready=!0,void this.bubble()):(l=this.getKeypath(),void h(l))};h.prototype={getKeypath:function(){return this.ref+"."+this.members.join(".")},bubble:function(){this.ready&&!this.pending&&this.callback(this.getKeypath())},resolve:function(a,b){var c=new i(this.root,b,this.mustache.priority,this,a);c.update(),this.keypathObservers.push(c),this.resolved=!--this.pending,this.bubble()},teardown:function(){for(var a;a=this.unresolved.pop();)a.teardown()},reassign:function(a,b){var c,d,e;for(d=this.indexRefMembers.length;d--;)e=this.indexRefMembers[d],e.ref===a&&(c=!0,this.members[e.index]=b);c&&this.bubble()}};var i=function(a,b,c,d,f){this.root=a,this.keypath=b,this.priority=c,this.resolver=d,this.index=f,e(this),this.update()};return i.prototype={update:function(){var a=this.resolver;a.members[this.index]=this.root.get(this.keypath),a.bubble()},teardown:function(){f(this)}},h}(K,u,z,Sb,U,V,Wb),Yb=function(a,b,c,d){return function(e,f){function g(a){e.resolve(a)}function h(c){var d=b(e.root,c,e.parentFragment);void 0!==d?g(d):(e.ref=c,a.addUnresolved(e))}var i,j,k,l,m;l=f.parentFragment,m=f.descriptor,e.root=l.root,e.parentFragment=l,e.descriptor=f.descriptor,e.index=f.index||0,e.priority=l.priority,e.type=f.descriptor.t,(i=m.r)&&(j=l.indexRefs,j&&void 0!==(k=j[i])?(e.indexRef=i,e.value=k,e.render(e.value)):h(i)),f.descriptor.x&&(e.resolver=new d(e,l,f.descriptor.x,g)),f.descriptor.kx&&(e.resolver=new c(e,f.descriptor.kx,h)),e.descriptor.n&&!e.hasOwnProperty("value")&&e.render(void 0)}}(D,z,Xb,Wb),Zb=function(a,b){var c={evaluateWrapped:!0};return function(){var d=b(this.root,this.keypath,c);a(d,this.value)||(this.render(d),this.value=d)}}(n,Z),$b=function(a,b){return function(c){var d;c!==this.keypath&&(this.registered&&(b(this),d=this.parentFragment&&this.parentFragment.owner&&this.parentFragment.owner.element?this.parentFragment.owner.element:this,d.reassign(null,null,this.keypath,c),c===this.keypath)||(this.keypath=c,a(this),this.update()))}}(U,V),_b=function(a){return function(b,c,d,e){var f,g;if(this.resolver&&this.resolver.reassign(b,c,d,e),this.keypath?(f=a(this.keypath,d,e),f&&this.resolve(f)):void 0!==b&&this.indexRef===b&&(this.value=c,this.render(c)),this.fragments)for(g=this.fragments.length;g--;)this.fragments[g].reassign(b,c,d,e)}}(Lb),ac=function(a,b,c,d){return{init:a,update:b,resolve:c,reassign:d}}(Yb,Zb,$b,_b),bc=function(a,b,c,d){var e,f,g;return f=/</g,g=/>/g,e=function(b,d){this.type=a.INTERPOLATOR,d&&(this.node=document.createTextNode(""),d.appendChild(this.node)),c.init(this,b)},e.prototype={update:c.update,resolve:c.resolve,reassign:c.reassign,detach:d,teardown:function(a){a&&this.detach(),b(this)},render:function(a){this.node&&(this.node.data=void 0==a?"":a)},firstNode:function(){return this.node},toString:function(){var a=void 0!=this.value?""+this.value:"";return a.replace(f,"&lt;").replace(g,"&gt;")}},e}(K,Rb,ac,Pb),cc=function(a){var b,c,d,e,f,g,h,i,j=this;if(b=this.parentFragment,f=[],a.forEach(function(a,b){var d,e,g,h;return a===b?void(f[a]=j.fragments[b]):(void 0===c&&(c=b),-1===a?void j.fragments[b].teardown(!0):(d=j.fragments[b],e=a-b,g=j.keypath+"."+b,h=j.keypath+"."+a,d.reassign(j.descriptor.i,a,g,h),void(f[a]=d)))}),void 0===c&&(c=this.length),this.length=e=this.root.get(this.keypath).length,e!==c){for(g={descriptor:this.descriptor.f,root:this.root,pNode:b.pNode,owner:this},this.descriptor.i&&(g.indexRef=this.descriptor.i),d=c;e>d;d+=1)(h=f[d])?this.docFrag.appendChild(h.detach(!1)):(g.context=this.keypath+"."+d,g.index=d,h=this.createFragment(g)),this.fragments[d]=h;i=b.findNextNode(this),b.pNode.insertBefore(this.docFrag,i)}},dc=function(a,b,c){function d(a,b,c){var d,e,f;if(e=b.length,e<a.length)for(f=a.fragments.splice(e,a.length-e);f.length;)f.pop().teardown(!0);else if(e>a.length)for(d=a.length;e>d;d+=1)c.context=a.keypath+"."+d,c.index=d,a.descriptor.i&&(c.indexRef=a.descriptor.i),a.fragments[d]=a.createFragment(c);a.length=e}function e(a,b,c){var d,e,f,g;for(f=a.hasKey||(a.hasKey={}),e=a.fragments.length;e--;)g=a.fragments[e],g.index in b||(a.fragments[e].teardown(!0),a.fragments.splice(e,1),f[g.index]=!1);for(d in b)f[d]||(c.context=a.keypath+"."+d,c.index=d,a.descriptor.i&&(c.indexRef=a.descriptor.i),a.fragments.push(a.createFragment(c)),f[d]=!0);a.length=a.fragments.length}function f(a,b){a.length||(b.context=a.keypath,b.index=0,a.fragments[0]=a.createFragment(b),a.length=1)}function g(a,c,d,e){var f,g,h,i;if(g=b(c)&&0===c.length,f=d?g||!c:c&&!g){if(a.length||(e.index=0,a.fragments[0]=a.createFragment(e),a.length=1),a.length>1)for(h=a.fragments.splice(1);i=h.pop();)i.teardown(!0)}else a.length&&(a.teardownFragments(!0),a.length=0)}return function(h,i){var j={descriptor:h.descriptor.f,root:h.root,pNode:h.parentFragment.pNode,pElement:h.parentFragment.pElement,owner:h};if(h.descriptor.n)switch(h.descriptor.n){case a.SECTION_IF:return void g(h,i,!1,j);case a.SECTION_UNLESS:return void g(h,i,!0,j);case a.SECTION_WITH:return void f(h,j);case a.SECTION_EACH:c(i)&&e(h,i,j)}b(i)?d(h,i,j):c(i)||"function"==typeof i?h.descriptor.i?e(h,i,j):f(h,j):g(h,i,!1,j)}}(K,F,_),ec=function(a,b){return function(c){var d,e;(e=this.root._wrapped[this.keypath])&&(c=e.get()),this.rendering||(this.rendering=!0,b(this,c),this.rendering=!1,(!this.docFrag||this.docFrag.childNodes.length)&&!this.initialising&&a&&(d=this.parentFragment.findNextNode(this),d&&d.parentNode===this.parentFragment.pNode?this.parentFragment.pNode.insertBefore(this.docFrag,d):this.parentFragment.pNode.appendChild(this.docFrag)))}}(h,dc),fc=function(a,b,c,d){var e,f,g,h,i;for(g=a.descriptor.i,e=b;c>e;e+=1)f=a.fragments[e],h=a.keypath+"."+(e-d),i=a.keypath+"."+e,f.index=e,f.reassign(g,e,h,i)},gc=function(a){function b(a){a.teardown(!0)}function c(a,b,c){var d,e,f;for(a.rendering=!0,d={descriptor:a.descriptor.f,root:a.root,pNode:a.parentFragment.pNode,pElement:a.pElement,owner:a,indexRef:a.descriptor.i},e=b;c>e;e+=1)d.context=a.keypath+"."+e,d.index=e,a.fragments[e]=a.createFragment(d);f=a.fragments[c]?a.fragments[c].firstNode():a.parentFragment.findNextNode(a),a.parentFragment.pNode.insertBefore(a.docFrag,f),a.rendering=!1}return function(d){var e,f,g,h,i,j=this;if(e=d.balance){if(f=d.rangeStart,j.length+=e,0>e)return j.fragments.splice(f,-e).forEach(b),void a(j,f,j.length,e);g=f+d.removed,h=f+d.added,i=[g,0],i.length+=e,j.fragments.splice.apply(j.fragments,i),a(j,h,j.length,e),c(j,g,h)}}}(fc),hc=function(a,b,c,d,e,f,g){var h,i;return g.push(function(){i=g.DomFragment}),h=function(c,d){this.type=a.SECTION,this.inverted=!!c.descriptor.n,this.pElement=c.pElement,this.fragments=[],this.length=0,d&&(this.docFrag=document.createDocumentFragment()),this.initialising=!0,b.init(this,c),d&&d.appendChild(this.docFrag),this.initialising=!1},h.prototype={update:b.update,resolve:b.resolve,reassign:b.reassign,splice:e,merge:c,detach:function(){var a,b;if(this.docFrag){for(b=this.fragments.length,a=0;b>a;a+=1)this.docFrag.appendChild(this.fragments[a].detach());return this.docFrag}},teardown:function(a){this.teardownFragments(a),f(this)},firstNode:function(){return this.fragments[0]?this.fragments[0].firstNode():this.parentFragment.findNextNode(this)},findNextNode:function(a){return this.fragments[a.index+1]?this.fragments[a.index+1].firstNode():this.parentFragment.findNextNode(this)},teardownFragments:function(a){for(var b;b=this.fragments.shift();)b.teardown(a)},render:d,createFragment:function(a){var b=new i(a);return this.docFrag&&this.docFrag.appendChild(b.docFrag),b},toString:function(){var a,b,c;for(a="",b=0,c=this.length,b=0;c>b;b+=1)a+=this.fragments[b].toString();return a},find:function(a){var b,c,d;for(c=this.fragments.length,b=0;c>b;b+=1)if(d=this.fragments[b].find(a))return d;return null},findAll:function(a,b){var c,d;for(d=this.fragments.length,c=0;d>c;c+=1)this.fragments[c].findAll(a,b)},findComponent:function(a){var b,c,d;for(c=this.fragments.length,b=0;c>b;b+=1)if(d=this.fragments[b].findComponent(a))return d;return null},findAllComponents:function(a,b){var c,d;for(d=this.fragments.length,c=0;d>c;c+=1)this.fragments[c].findAllComponents(a,b)}},h}(K,ac,cc,ec,gc,Rb,t),ic=function(a,b){function c(a){return f[a]||(f[a]=b(a))}var d,e,f={};try{b("table").innerHTML="foo"}catch(g){d=!0,e={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}return function(b,f,g,h){var i,j,k=[];if(b)for(d&&(j=e[f])?(i=c("DIV"),i.innerHTML=j[0]+b+j[1],i=i.querySelector(".x")):g===a.svg?(i=c("DIV"),i.innerHTML='<svg class="x">'+b+"</svg>",i=i.querySelector(".x")):(i=c(f),i.innerHTML=b);i.firstChild;)k.push(i.firstChild),h.appendChild(i.firstChild);return k}}(f,g),jc=function(a,b,c,d,e){var f=function(b,d){this.type=a.TRIPLE,d&&(this.nodes=[],this.docFrag=document.createDocumentFragment()),this.initialising=!0,c.init(this,b),d&&d.appendChild(this.docFrag),this.initialising=!1};return f.prototype={update:c.update,resolve:c.resolve,reassign:c.reassign,detach:function(){var a,b;if(this.docFrag){for(a=this.nodes.length,b=0;a>b;b+=1)this.docFrag.appendChild(this.nodes[b]);return this.docFrag}},teardown:function(a){a&&(this.detach(),this.docFrag=this.nodes=null),e(this)},firstNode:function(){return this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)},render:function(a){var b,c;if(this.nodes){for(;this.nodes.length;)b=this.nodes.pop(),b.parentNode.removeChild(b);if(!a)return void(this.nodes=[]);c=this.parentFragment.pNode,this.nodes=d(a,c.tagName,c.namespaceURI,this.docFrag),this.initialising||c.insertBefore(this.docFrag,this.parentFragment.findNextNode(this)),"SELECT"===c.tagName&&c._ractive&&c._ractive.binding&&c._ractive.binding.update()}},toString:function(){return void 0!=this.value?this.value:""},find:function(a){var c,d,e,f;for(d=this.nodes.length,c=0;d>c;c+=1)if(e=this.nodes[c],1===e.nodeType){if(b(e,a))return e;if(f=e.querySelector(a))return f}return null},findAll:function(a,c){var d,e,f,g,h,i;for(e=this.nodes.length,d=0;e>d;d+=1)if(f=this.nodes[d],1===f.nodeType&&(b(f,a)&&c.push(f),g=f.querySelectorAll(a)))for(h=g.length,i=0;h>i;i+=1)c.push(g[i])}},f}(K,gb,ac,ic,Rb),kc=function(a){return function(b,c){return b.a&&b.a.xmlns?b.a.xmlns:"svg"===b.e?a.svg:c.namespaceURI||a.html}}(f),lc=function(){var a,b,c,d;return a="altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" "),b="attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef gradientTransform gradientUnits kernelMatrix kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" "),c=function(a){for(var b={},c=a.length;c--;)b[a[c].toLowerCase()]=a[c];return b},d=c(a.concat(b)),function(a){var b=a.toLowerCase();return d[b]||b}}(),mc=function(a,b){return function(c,d){var e,f;if(e=d.indexOf(":"),-1===e||(f=d.substr(0,e),"xmlns"===f))c.name=c.element.namespace!==a.html?b(d):d,c.lcName=c.name.toLowerCase();else if(d=d.substring(e+1),c.name=b(d),c.lcName=c.name.toLowerCase(),c.namespace=a[f.toLowerCase()],!c.namespace)throw'Unknown namespace ("'+f+'")'}}(f,lc),nc=function(a){return function(b,c){var d,e=c.value||"";(d=c.pNode)&&(b.namespace?d.setAttributeNS(b.namespace,c.name,e):"style"===c.name&&d.style.setAttribute?d.style.setAttribute("cssText",e):"class"!==c.name||d.namespaceURI&&d.namespaceURI!==a.html?d.setAttribute(c.name,e):d.className=e,"id"===b.name&&(c.root.nodes[c.value]=d),"value"===b.name&&(d._ractive.value=c.value)),b.value=c.value||null}}(f),oc=function(a){var b={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"};return function(c,d){var e;!c.pNode||c.namespace||d.pNode.namespaceURI&&d.pNode.namespaceURI!==a.html||(e=b[c.name]||c.name,void 0!==d.pNode[e]&&(c.propertyName=e),("boolean"==typeof d.pNode[e]||"value"===e)&&(c.useProperty=!0))}}(f),pc=function(a){return function(b){var c,d;return c=b.fragment.items,1===c.length&&(d=c[0],d.type===a.INTERPOLATOR&&(d.keypath||d.ref))?d:void 0}}(K),qc=function(a){return function(b,c){var d;if(!a(b)||!a(c))return!1;if(b.length!==c.length)return!1;for(d=b.length;d--;)if(b[d]!==c[d])return!1;return!0}}(F),rc=function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u='For two-way binding to work, attribute value must be a single interpolator (e.g. value="{{foo}}")',v="You cannot set up two-way binding against an expression ";return g=function(){var a,c,d,e=this.pNode;return(a=this.interpolator)?a.keypath&&"${"===a.keypath.substr?(b(v+a.keypath),!1):(a.keypath||a.resolve(a.descriptor.r),this.keypath=a.keypath,(c=k(this))?(e._ractive.binding=this.element.binding=c,this.twoway=!0,d=this.root._twowayBindings[this.keypath]||(this.root._twowayBindings[this.keypath]=[]),d.push(c),!0):!1):(b(u),!1)},h=function(){a.start(this._ractive.root),this._ractive.binding.update(),a.end()},i=function(){var a;h.call(this),a=e(this._ractive.root,this._ractive.binding.keypath,j),this.value=void 0==a?"":a},j={evaluateWrapped:!0},k=function(a){var b=a.pNode;if("SELECT"===b.tagName)return b.multiple?new m(a,b):new n(a,b);if("checkbox"===b.type||"radio"===b.type){if("name"===a.propertyName){if("checkbox"===b.type)return new p(a,b);if("radio"===b.type)return new o(a,b)}return"checked"===a.propertyName?new q(a,b):null}if("value"!==a.lcName)throw new Error("Attempted to set up an illegal two-way binding. This error is unexpected - if you can, please file an issue at https://github.com/RactiveJS/Ractive, or contact @RactiveJS on Twitter. Thanks!");return"file"===b.type?new r(a,b):b.getAttribute("contenteditable")?new s(a,b):new t(a,b)},m=function(a,b){var c;l(this,a,b),b.addEventListener("change",h,!1),c=e(this.root,this.keypath),void 0===c&&this.update()},m.prototype={value:function(){var a,b,c,d,e,f;for(a=[],b=this.node.options,d=b.length,c=0;d>c;c+=1)e=b[c],e.selected&&(f=e._ractive?e._ractive.value:e.value,a.push(f));return a},update:function(){var b,d,e;return b=this.attr,d=b.value,e=this.value(),void 0!==d&&c(e,d)||(a.addBinding(b),b.value=e,f(this.root,this.keypath,e),a.trigger()),this},deferUpdate:function(){this.deferred!==!0&&(a.addAttribute(this),this.deferred=!0)},teardown:function(){this.node.removeEventListener("change",h,!1)}},n=function(a,b){var c;l(this,a,b),b.addEventListener("change",h,!1),c=e(this.root,this.keypath),void 0===c&&this.update()},n.prototype={value:function(){var a,b,c,d,e;for(a=this.node.options,c=a.length,b=0;c>b;b+=1)if(d=a[b],a[b].selected)return e=d._ractive?d._ractive.value:d.value},update:function(){var b=this.value();return a.addBinding(this.attr),this.attr.value=b,f(this.root,this.keypath,b),a.trigger(),this},deferUpdate:function(){this.deferred!==!0&&(a.addAttribute(this),this.deferred=!0)},teardown:function(){this.node.removeEventListener("change",h,!1)}},o=function(b,c){var d;this.radioName=!0,l(this,b,c),c.name="{{"+b.keypath+"}}",c.addEventListener("change",h,!1),c.attachEvent&&c.addEventListener("click",h,!1),d=e(this.root,this.keypath),void 0!==d?c.checked=d==c._ractive.value:a.addRadio(this)},o.prototype={value:function(){return this.node._ractive?this.node._ractive.value:this.node.value},update:function(){var b=this.node;b.checked&&(a.addBinding(this.attr),f(this.root,this.keypath,this.value()),a.trigger())},teardown:function(){this.node.removeEventListener("change",h,!1),this.node.removeEventListener("click",h,!1)}},p=function(b,c){var d,f;this.checkboxName=!0,l(this,b,c),c.name="{{"+this.keypath+"}}",c.addEventListener("change",h,!1),c.attachEvent&&c.addEventListener("click",h,!1),d=e(this.root,this.keypath),void 0!==d?(f=-1!==d.indexOf(c._ractive.value),c.checked=f):a.addCheckbox(this)},p.prototype={changed:function(){return this.node.checked!==!!this.checked},update:function(){this.checked=this.node.checked,a.addBinding(this.attr),f(this.root,this.keypath,d(this.root,this.keypath)),a.trigger()},teardown:function(){this.node.removeEventListener("change",h,!1),this.node.removeEventListener("click",h,!1)}},q=function(a,b){l(this,a,b),b.addEventListener("change",h,!1),b.attachEvent&&b.addEventListener("click",h,!1)},q.prototype={value:function(){return this.node.checked},update:function(){a.addBinding(this.attr),f(this.root,this.keypath,this.value()),a.trigger()},teardown:function(){this.node.removeEventListener("change",h,!1),this.node.removeEventListener("click",h,!1)}},r=function(a,b){l(this,a,b),b.addEventListener("change",h,!1)},r.prototype={value:function(){return this.attr.pNode.files},update:function(){f(this.attr.root,this.attr.keypath,this.value()),a.trigger()},teardown:function(){this.node.removeEventListener("change",h,!1)}},s=function(a,b){l(this,a,b),b.addEventListener("change",h,!1),this.root.lazy||(b.addEventListener("input",h,!1),b.attachEvent&&b.addEventListener("keyup",h,!1))},s.prototype={update:function(){a.addBinding(this.attr),f(this.root,this.keypath,this.node.innerHTML),a.trigger()},teardown:function(){this.node.removeEventListener("change",h,!1),this.node.removeEventListener("input",h,!1),this.node.removeEventListener("keyup",h,!1)}},t=function(a,b){l(this,a,b),b.addEventListener("change",h,!1),this.root.lazy||(b.addEventListener("input",h,!1),b.attachEvent&&b.addEventListener("keyup",h,!1)),this.node.addEventListener("blur",i,!1)},t.prototype={value:function(){var a=this.attr.pNode.value;return+a+""===a&&-1===a.indexOf("e")&&(a=+a),a},update:function(){var b=this.attr,c=this.value();a.addBinding(b),f(b.root,b.keypath,c),a.trigger()},teardown:function(){this.node.removeEventListener("change",h,!1),this.node.removeEventListener("input",h,!1),this.node.removeEventListener("keyup",h,!1),this.node.removeEventListener("blur",i,!1)}},l=function(a,b,c){a.attr=b,a.node=c,a.root=b.root,a.keypath=b.keypath},g}(D,$,qc,w,Z,N),sc=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o;return d=function(){var a;if(!this.ready)return this;if(a=this.pNode,"SELECT"===a.tagName&&"value"===this.lcName)return this.update=f,this.deferredUpdate=g,this.update();if(this.isFileInputValue)return this.update=e,this;if(this.twoway&&"name"===this.lcName){if("radio"===a.type)return this.update=j,this.update();if("checkbox"===a.type)return this.update=k,this.update()}return"style"===this.lcName&&a.style.setAttribute?(this.update=l,this.update()):"class"!==this.lcName||a.namespaceURI&&a.namespaceURI!==b.html?a.getAttribute("contenteditable")&&"value"===this.lcName?(this.update=n,this.update()):(this.update=o,this.update()):(this.update=m,this.update())},e=function(){return this},g=function(){this.deferredUpdate=this.pNode.multiple?i:h,this.deferredUpdate()},f=function(){return a.addSelectValue(this),this},h=function(){var a,b,c,d,e=this.fragment.getValue();for(this.value=this.pNode._ractive.value=e,a=this.pNode.options,d=a.length;d--;)if(b=a[d],c=b._ractive?b._ractive.value:b.value,c==e)return b.selected=!0,this;return this},i=function(){var a,b,d,e,f=this.fragment.getValue();for(c(f)||(f=[f]),a=this.pNode.options,b=a.length;b--;)d=a[b],e=d._ractive?d._ractive.value:d.value,d.selected=-1!==f.indexOf(e);return this.value=f,this},j=function(){var a,b;return a=this.pNode,b=this.fragment.getValue(),a.checked=b==a._ractive.value,this},k=function(){var a,b;return a=this.pNode,b=this.fragment.getValue(),c(b)?(a.checked=-1!==b.indexOf(a._ractive.value),this):(a.checked=b==a._ractive.value,this)},l=function(){var a,b;return a=this.pNode,b=this.fragment.getValue(),void 0===b&&(b=""),b!==this.value&&(a.style.setAttribute("cssText",b),this.value=b),this},m=function(){var a,b;return a=this.pNode,b=this.fragment.getValue(),void 0===b&&(b=""),b!==this.value&&(a.className=b,this.value=b),this},n=function(){var a,b;return a=this.pNode,b=this.fragment.getValue(),void 0===b&&(b=""),b!==this.value&&(this.active||(a.innerHTML=b),this.value=b),this},o=function(){var a,b,c;if(a=this.pNode,b=this.fragment.getValue(),this.isValueAttribute&&(a._ractive.value=b),void 0==b&&(b=""),b!==this.value){if(this.useProperty)return this.active||(a[this.propertyName]=b),"OPTION"===a.tagName&&a.selected&&(c=this.element.select.binding)&&c.update(),this.value=b,this;if(this.namespace)return a.setAttributeNS(this.namespace,this.name,b),this.value=b,this;"id"===this.lcName&&(void 0!==this.value&&(this.root.nodes[this.value]=void 0),this.root.nodes[b]=a),a.setAttribute(this.name,b),this.value=b}return this},d}(D,f,F),tc=function(a){var b=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/;return function(c){var d;return(d=c.matchPattern(b))?{t:a.NUMBER_LITERAL,v:d}:null}}(K),uc=function(a){return function(b){var c=b.remaining();return"true"===c.substr(0,4)?(b.pos+=4,{t:a.BOOLEAN_LITERAL,v:"true"}):"false"===c.substr(0,5)?(b.pos+=5,{t:a.BOOLEAN_LITERAL,v:"false"}):null}}(K),vc=function(){var a,b,c;return a=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/,b=/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/,c=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/,function(d){return function(e){var f,g,h,i;for(f=e.pos,g='"',h=!1;!h;)i=e.matchPattern(a)||e.matchPattern(b)||e.matchString(d),i?g+='"'===i?'\\"':"\\'"===i?"'":i:(i=e.matchPattern(c),i?g+="\\u"+("000"+i.charCodeAt(1).toString(16)).slice(-4):h=!0);return g+='"',JSON.parse(g)}}}(),wc=function(a){return a('"')}(vc),xc=function(a){return a("'")}(vc),yc=function(a,b,c){return function(d){var e,f;return e=d.pos,d.matchString('"')?(f=c(d),d.matchString('"')?{t:a.STRING_LITERAL,v:f}:(d.pos=e,null)):d.matchString("'")?(f=b(d),d.matchString("'")?{t:a.STRING_LITERAL,v:f}:(d.pos=e,null)):null}}(K,wc,xc),zc={name:/^[a-zA-Z_$][a-zA-Z_$0-9]*/},Ac=function(a,b,c){var d=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;return function(e){var f;return(f=a(e))?d.test(f.v)?f.v:'"'+f.v.replace(/"/g,'\\"')+'"':(f=b(e))?f.v:(f=e.matchPattern(c.name))?f:void 0}}(yc,tc,zc),Bc=function(a,b){return function(c){var d,e,f;
return d=c.pos,c.allowWhitespace(),e=b(c),null===e?(c.pos=d,null):(c.allowWhitespace(),c.matchString(":")?(c.allowWhitespace(),f=c.readExpression(),null===f?(c.pos=d,null):{t:a.KEY_VALUE_PAIR,k:e,v:f}):(c.pos=d,null))}}(K,Ac),Cc=function(a){return function b(c){var d,e,f,g;return d=c.pos,f=a(c),null===f?null:(e=[f],c.matchString(",")?(g=b(c),g?e.concat(g):(c.pos=d,null)):e)}}(Bc),Dc=function(a,b){return function(c){var d,e;return d=c.pos,c.allowWhitespace(),c.matchString("{")?(e=b(c),c.allowWhitespace(),c.matchString("}")?{t:a.OBJECT_LITERAL,m:e}:(c.pos=d,null)):(c.pos=d,null)}}(K,Cc),Ec=function Ue(a){function b(a){d.push(a)}var c,d,e,f;if(c=a.pos,a.allowWhitespace(),e=a.readExpression(),null===e)return null;if(d=[e],a.allowWhitespace(),a.matchString(",")){if(f=Ue(a),null===f)return a.pos=c,null;f.forEach(b)}return d},Fc=function(a,b){return function(c){var d,e;return d=c.pos,c.allowWhitespace(),c.matchString("[")?(e=b(c),c.matchString("]")?{t:a.ARRAY_LITERAL,m:e}:(c.pos=d,null)):(c.pos=d,null)}}(K,Ec),Gc=function(a,b,c,d,e){return function(f){var g=a(f)||b(f)||c(f)||d(f)||e(f);return g}}(tc,uc,yc,Dc,Fc),Hc=function(a,b){var c,d,e,f;return c=/^\.[a-zA-Z_$0-9]+/,e=function(a){var b=a.matchPattern(d);return b?"."+b:null},d=/^\[(0|[1-9][0-9]*)\]/,f=/^(?:Array|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)$/,function(d){var g,h,i,j,k,l,m;for(g=d.pos,h="";d.matchString("../");)h+="../";if(h||(j=d.matchString(".")||""),i=d.matchPattern(/^@(?:index|key)/)||d.matchPattern(b.name)||"",!h&&!j&&f.test(i))return{t:a.GLOBAL,v:i};if("this"!==i||h||j||(i=".",g+=3),k=(h||j)+i,!k)return null;for(;l=d.matchPattern(c)||e(d);)k+=l;return d.matchString("(")&&(m=k.lastIndexOf("."),-1!==m?(k=k.substr(0,m),d.pos=g+k.length):d.pos-=1),{t:a.REFERENCE,n:k}}}(K,zc),Ic=function(a){return function(b){var c,d;return c=b.pos,b.matchString("(")?(b.allowWhitespace(),(d=b.readExpression())?(b.allowWhitespace(),b.matchString(")")?{t:a.BRACKETED,x:d}:(b.pos=c,null)):(b.pos=c,null)):null}}(K),Jc=function(a,b,c){return function(d){return a(d)||b(d)||c(d)}}(Gc,Hc,Ic),Kc=function(a,b){return function(c){var d,e,f;if(d=c.pos,c.allowWhitespace(),c.matchString(".")){if(c.allowWhitespace(),e=c.matchPattern(b.name))return{t:a.REFINEMENT,n:e};c.error("Expected a property name")}return c.matchString("[")?(c.allowWhitespace(),f=c.readExpression(),f||c.error("an expression"),c.allowWhitespace(),c.matchString("]")||c.error("Expected ']'"),{t:a.REFINEMENT,x:f}):null}}(K,zc),Lc=function(a,b,c,d){return function(e){var f,g,h,i;if(g=b(e),!g)return null;for(;g;)if(f=e.pos,h=d(e))g={t:a.MEMBER,x:g,r:h};else{if(!e.matchString("("))break;if(e.allowWhitespace(),i=c(e),e.allowWhitespace(),!e.matchString(")")){e.pos=f;break}g={t:a.INVOCATION,x:g},i&&(g.o=i)}return g}}(K,Jc,Ec,Kc),Mc=function(a,b){var c,d;return d=function(b,c){return function(d){var e,f;return d.matchString(b)?(e=d.pos,d.allowWhitespace(),f=d.readExpression(),f||d.error("Expected a JavaScript expression"),{s:b,o:f,t:a.PREFIX_OPERATOR}):c(d)}},function(){var a,e,f,g,h;for(g="! ~ + - typeof".split(" "),h=b,a=0,e=g.length;e>a;a+=1)f=d(g[a],h),h=f;c=h}(),c}(K,Lc),Nc=function(a,b){var c,d;return d=function(b,c){return function(d){var e,f,g;if(f=c(d),!f)return null;for(;;){if(e=d.pos,d.allowWhitespace(),!d.matchString(b))return d.pos=e,f;if("in"===b&&/[a-zA-Z_$0-9]/.test(d.remaining().charAt(0)))return d.pos=e,f;if(d.allowWhitespace(),g=c(d),!g)return d.pos=e,f;f={t:a.INFIX_OPERATOR,s:b,o:[f,g]}}}},function(){var a,e,f,g,h;for(g="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" "),h=b,a=0,e=g.length;e>a;a+=1)f=d(g[a],h),h=f;c=h}(),c}(K,Mc),Oc=function(a,b){return function(c){var d,e,f,g;return(e=b(c))?(d=c.pos,c.allowWhitespace(),c.matchString("?")?(c.allowWhitespace(),(f=c.readExpression())?(c.allowWhitespace(),c.matchString(":")?(c.allowWhitespace(),g=c.readExpression(),g?{t:a.CONDITIONAL,o:[e,f,g]}:(c.pos=d,e)):(c.pos=d,e)):(c.pos=d,e)):(c.pos=d,e)):null}}(K,Nc),Pc=function(a,b){function c(a){return JSON.stringify(String(a))}function d(c,e){var f,g;if(c.t===a.REFERENCE&&-1===e.indexOf(c.n)&&e.unshift(c.n),g=c.o||c.m)if(b(g))d(g,e);else for(f=g.length;f--;)d(g[f],e);c.x&&d(c.x,e),c.r&&d(c.r,e),c.v&&d(c.v,e)}function e(b,d,f){var g=function(a){return e(b,a,f)};switch(d.t){case a.BOOLEAN_LITERAL:case a.GLOBAL:case a.NUMBER_LITERAL:return d.v;case a.STRING_LITERAL:return c(d.v);case a.ARRAY_LITERAL:return"["+(d.m?d.m.map(g).join(","):"")+"]";case a.OBJECT_LITERAL:return"{"+(d.m?d.m.map(g).join(","):"")+"}";case a.KEY_VALUE_PAIR:return d.k+":"+e(b,d.v,f);case a.PREFIX_OPERATOR:return("typeof"===d.s?"typeof ":d.s)+e(b,d.o,f);case a.INFIX_OPERATOR:return e(b,d.o[0],f)+("in"===d.s.substr(0,2)?" "+d.s+" ":d.s)+e(b,d.o[1],f);case a.INVOCATION:return e(b,d.x,f)+"("+(d.o?d.o.map(g).join(","):"")+")";case a.BRACKETED:return"("+e(b,d.x,f)+")";case a.MEMBER:return e(b,d.x,f)+e(b,d.r,f);case a.REFINEMENT:return d.n?"."+d.n:"["+e(b,d.x,f)+"]";case a.CONDITIONAL:return e(b,d.o[0],f)+"?"+e(b,d.o[1],f)+":"+e(b,d.o[2],f);case a.REFERENCE:return"${"+f.indexOf(d.n)+"}";default:b.error("foo")}}return function(a){var b,c=[];return d(a,c),b={r:c,s:e(this,a,c)}}}(K,_),Qc=function(a,b,c,d,e){var f,g,h=/^\s+/;return g=function(a){this.name="ParseError",this.message=a},g.prototype=Error.prototype,f=function(a,b){var c,d;for(this.str=a,this.options=b||{},this.pos=0,this.init&&this.init(a,b),c=[];this.pos<this.str.length&&(d=this.read());)c.push(d);this.leftover=this.remaining(),this.result=this.postProcess?this.postProcess(c,b):c},f.prototype={read:function(a){var b,c,d,e;for(a||(a=this.converters),b=this.pos,d=a.length,c=0;d>c;c+=1)if(this.pos=b,e=a[c](this))return e;return null},readExpression:function(){return d(this)},flattenExpression:e,getLinePos:function(){var a,b,c,d,e,f;a=this.str.split("\n"),e=-1,d=0;do c=d,e++,b=a[e],d+=b.length+1;while(d<=this.pos);return f=this.pos-c,{line:e+1,ch:f+1,text:b,toJSON:function(){return[this.line,this.ch]},toString:function(){return"line "+this.line+" character "+this.ch+":\n"+this.text+"\n"+this.text.substr(0,this.ch-1).replace(/[\S]/g," ")+"^----"}}},error:function(a){var b,c;throw b=this.getLinePos(),c=a+" at "+b,new g(c)},matchString:function(a){return this.str.substr(this.pos,a.length)===a?(this.pos+=a.length,a):void 0},matchPattern:function(a){var b;return(b=a.exec(this.remaining()))?(this.pos+=b[0].length,b[1]||b[0]):void 0},allowWhitespace:function(){this.matchPattern(h)},remaining:function(){return this.str.substring(this.pos)},nextChar:function(){return this.str.charAt(this.pos)}},f.extend=function(a){var d,e,g=this;d=function(a,b){f.call(this,a,b)},d.prototype=b(g.prototype);for(e in a)c.call(a,e)&&(d.prototype[e]=a[e]);return d.extend=f.extend,d},a.Parser=f,f}(t,Hb,x,Oc,Pc),Rc=function(a,b,c){function d(a){var b,d,e;return a.allowWhitespace(),(b=c(a))?(e={key:b},a.allowWhitespace(),a.matchString(":")?(a.allowWhitespace(),(d=a.read())?(e.value=d.v,e):null):null):null}var e,f,g,h,i,j,k;return f={"true":!0,"false":!1,undefined:void 0,"null":null},g=new RegExp("^(?:"+Object.keys(f).join("|")+")"),h=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,i=/\$\{([^\}]+)\}/g,j=/^\$\{([^\}]+)\}/,k=/^\s*$/,e=a.extend({init:function(a,b){this.values=b.values},postProcess:function(a){return 1===a.length&&k.test(this.leftover)?{value:a[0].v}:null},converters:[function(a){var b;return a.values?(b=a.matchPattern(j),b&&a.values.hasOwnProperty(b)?{v:a.values[b]}:void 0):null},function(a){var b;return(b=a.matchPattern(g))?{v:f[b]}:void 0},function(a){var b;return(b=a.matchPattern(h))?{v:+b}:void 0},function(a){var c,d=b(a);return d&&(c=a.values)?{v:d.v.replace(i,function(a,b){return b in c?c[b]:b})}:d},function(a){var b,c;if(!a.matchString("{"))return null;for(b={};c=d(a);){if(b[c.key]=c.value,a.allowWhitespace(),a.matchString("}"))return{v:b};if(!a.matchString(","))return null}return null},function(a){var b,c;if(!a.matchString("["))return null;for(b=[],a.allowWhitespace();c=a.read();){if(b.push(c.v),a.allowWhitespace(),a.matchString("]"))return{v:b};if(!a.matchString(","))return null;a.allowWhitespace()}return null}]}),function(a,b){var c=new e(a,{values:b});return c.result}}(Qc,yc,Ac),Sc=function(a,b,c){function d(a){return"string"==typeof a?a:JSON.stringify(a)}var e=function(b){this.type=a.INTERPOLATOR,c.init(this,b)};return e.prototype={update:c.update,resolve:c.resolve,reassign:c.reassign,render:function(a){this.value=a,this.parentFragment.bubble()},teardown:function(){b(this)},toString:function(){return void 0==this.value?"":d(this.value)}},e}(K,Rb,ac),Tc=function(a,b,c,d,e){var f,g;return e.push(function(){g=e.StringFragment}),f=function(c){this.type=a.SECTION,this.fragments=[],this.length=0,b.init(this,c)},f.prototype={update:b.update,resolve:b.resolve,reassign:b.reassign,teardown:function(){this.teardownFragments(),d(this)},teardownFragments:function(){for(;this.fragments.length;)this.fragments.shift().teardown();this.length=0},bubble:function(){this.value=this.fragments.join(""),this.parentFragment.bubble()},render:function(a){var b;(b=this.root._wrapped[this.keypath])&&(a=b.get()),c(this,a),this.parentFragment.bubble()},createFragment:function(a){return new g(a)},toString:function(){return this.fragments.join("")}},f}(K,ac,dc,Rb,t),Uc=function(a){var b=function(b){this.type=a.TEXT,this.text=b};return b.prototype={toString:function(){return this.text},reassign:function(){},teardown:function(){}},b}(K),Vc=function(a,b){function c(a,b,d,e){return e=e||0,a.map(function(a){var f,g,h;return a.text?a.text:a.fragments?a.fragments.map(function(a){return c(a.items,b,d,e)}).join(""):(f=d+"-"+e++,h=(g=a.root._wrapped[a.keypath])?g.value:a.value,b[f]=h,"${"+f+"}")}).join("")}var d={};return function(e){var f,g,h,i,j,k,l,m,n;return e=e||d,f=e.args,g=f||e.parse,l=f?"argsList":"value",m=f?"dirtyArgs":"dirtyValue",(this[m]||!this.hasOwnProperty(l))&&(1===this.items.length&&this.items[0].type===a.INTERPOLATOR?(h=this.items[0].value,void 0!==h&&(n=f?[h]:h)):(g&&(i={},j=c(this.items,i,this.root._guid),k=b(f?"["+j+"]":j,i)),n=k?k.value:f?[this.toString()]:this.toString()),this[l]=n,this[m]=!1),this[l]}}(K,Rc),Wc=function(a,b,c,d,e,f,g,h){var i=function(a){c.init(this,a)};return i.prototype={reassign:c.reassign,createItem:function(b){if("string"==typeof b.descriptor)return new f(b.descriptor);switch(b.descriptor.t){case a.INTERPOLATOR:return new d(b);case a.TRIPLE:return new d(b);case a.SECTION:return new e(b);default:throw"Something went wrong in a rather interesting way"}},bubble:function(){this.dirtyValue=this.dirtyArgs=!0,this.owner.bubble()},teardown:function(){var a,b;for(a=this.items.length,b=0;a>b;b+=1)this.items[b].teardown()},getValue:g,isSimple:function(){var b,c,d;if(void 0!==this.simple)return this.simple;for(b=this.items.length;b--;)if(c=this.items[b],c.type!==a.TEXT){if(c.type!==a.INTERPOLATOR)return this.simple=!1;if(d)return!1;d=!0}return this.simple=!0},toString:function(){return this.items.join("")},toJSON:function(){var a,c=this.getValue();return"string"==typeof c&&(a=b(c),c=a?a.value:c),c}},h.StringFragment=i,i}(K,Rc,Ob,Sc,Tc,Uc,Vc,t),Xc=function(a,b,c,d,e,f,g,h,i){function j(a){return a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}var k,l;return l=/allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|draggable|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|spellcheck|translate|trueSpeed|typeMustMatch|visible/,k=function(a){return this.type=b.ATTRIBUTE,this.element=a.element,c(this,a.name),a.value&&"string"!=typeof a.value?(this.root=a.root,this.pNode=a.pNode,this.parentFragment=this.element.parentFragment,this.fragment=new i({descriptor:a.value,root:this.root,owner:this}),this.interpolator=f(this),void(this.pNode&&("value"===this.name&&(this.isValueAttribute=!0,"INPUT"===this.pNode.tagName&&"file"===this.pNode.type&&(this.isFileInputValue=!0)),e(this,a),this.selfUpdating=this.fragment.isSimple(),this.ready=!0))):void d(this,a)},k.prototype={bind:g,update:h,updateBindings:function(){this.keypath=this.interpolator.keypath||this.interpolator.ref,"name"===this.propertyName&&(this.pNode.name="{{"+this.keypath+"}}")},reassign:function(a,b,c,d){this.fragment&&(this.fragment.reassign(a,b,c,d),this.twoway&&this.updateBindings())},teardown:function(){var a;if(this.boundEvents)for(a=this.boundEvents.length;a--;)this.pNode.removeEventListener(this.boundEvents[a],this.updateModel,!1);this.fragment&&this.fragment.teardown()},bubble:function(){this.selfUpdating?this.update():!this.deferred&&this.ready&&(a.addAttribute(this),this.deferred=!0)},toString:function(){var a,b;if(null===this.value)return this.name;if("value"!==this.name||"select"!==this.element.lcName)return"name"===this.name&&"input"===this.element.lcName&&(b=this.interpolator)?"name={{"+(b.keypath||b.ref)+"}}":this.fragment&&l.test(this.name)?this.fragment.getValue()?this.name:null:(a=j(this.fragment?this.fragment.toString():this.value),this.name+(a?'="'+a+'"':""))}},k}(D,K,mc,nc,oc,pc,rc,sc,Wc),Yc=function(a){return function(b,c,d){var e=new a({element:b,name:c,value:d,root:b.root,pNode:b.node});b.attributes.push(b.attributes[c]=e),"name"!==c&&e.update()}}(Xc),Zc=function(a){return function(b,c){var d;b.attributes=[];for(d in c)c.hasOwnProperty(d)&&a(b,d,c[d]);return b.attributes}}(Yc),$c=function(a,b,c){var d,e,f;return a.push(function(){d=a.DomFragment}),e=function(){var a=this.node,b=this.fragment.toString();if(a.styleSheet)a.styleSheet.cssText=b;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(document.createTextNode(b))}},f=function(){this.node.type&&"text/javascript"!==this.node.type||b("Script tag was updated. This does not cause the code to be re-evaluated!"),this.node.text=this.fragment.toString()},function(a,b,g,h){return"script"===a.lcName||"style"===a.lcName?(a.fragment=new c({descriptor:g.f,root:a.root,owner:a}),void(h&&("script"===a.lcName?(a.bubble=f,a.node.text=a.fragment.toString()):(a.bubble=e,a.bubble())))):(a.fragment=new d({descriptor:g.f,root:a.root,pNode:b,owner:a,pElement:a}),void(h&&b.appendChild(a.fragment.docFrag)))}}(t,$,Wc),_c=function(a,b){var c,d;return c={args:!0},d=function(d,e,f){var g,h,i,j=this;if(j.root=e,j.node=f.node,g=d.n||d,"string"!=typeof g&&(h=new b({descriptor:g,root:e,owner:f}),g=h.toString(),h.teardown()),d.a?j.params=d.a:d.d&&(j.fragment=new b({descriptor:d.d,root:e,owner:f}),j.params=j.fragment.getValue(c),j.fragment.bubble=function(){this.dirtyArgs=this.dirtyValue=!0,j.params=this.getValue(c),j.ready&&j.update()}),j.fn=e.decorators[g],!j.fn){if(i='Missing "'+g+'" decorator. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#decorators',e.debug)throw new Error(i);a(i)}},d.prototype={init:function(){var a,b;if(this.params?(b=[this.node].concat(this.params),a=this.fn.apply(this.root,b)):a=this.fn.call(this.root,this.node),!a||!a.teardown)throw new Error("Decorator definition must return an object with a teardown method");this.actual=a,this.ready=!0},update:function(){this.actual.update?this.actual.update.apply(this.root,this.params):(this.actual.teardown(!0),this.init())},teardown:function(a){this.actual.teardown(),!a&&this.fragment&&this.fragment.teardown()}},d}($,Wc),ad=function(a,b){return function(c,d,e){var f=new b(c,d,e);f.fn&&(e.decorator=f,a.addDecorator(e.decorator))}}(D,_c),bd=function(a,b){var c,d,e,f,g,h,i,j,k,l={args:!0};return c=function(a,b,c,e){var f,g;f=a.node._ractive.events,g=f[b]||(f[b]=new d(a,b,e)),g.add(c)},d=function(b,c){var d;this.element=b,this.root=b.root,this.node=b.node,this.name=c,this.proxies=[],(d=this.root.events[c])?this.custom=d(this.node,k(c)):("on"+c in this.node||a('Missing "'+this.name+'" event. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#events'),this.node.addEventListener(c,j,!1))},d.prototype={add:function(a){this.proxies.push(new e(this.element,this.root,a))},teardown:function(){var a;for(this.custom?this.custom.teardown():this.node.removeEventListener(this.name,j,!1),a=this.proxies.length;a--;)this.proxies[a].teardown()},fire:function(a){for(var b=this.proxies.length;b--;)this.proxies[b].fire(a)}},e=function(a,c,d){var e;return this.root=c,e=d.n||d,this.n="string"==typeof e?e:new b({descriptor:d.n,root:this.root,owner:a}),d.a?(this.a=d.a,void(this.fire=g)):d.d?(this.d=new b({descriptor:d.d,root:this.root,owner:a}),void(this.fire=h)):void(this.fire=f)},e.prototype={teardown:function(){this.n.teardown&&this.n.teardown(),this.d&&this.d.teardown()},bubble:function(){}},f=function(a){this.root.fire(this.n.toString(),a)},g=function(a){this.root.fire.apply(this.root,[this.n.toString(),a].concat(this.a))},h=function(a){var b=this.d.getValue(l);"string"==typeof b&&(b=b.substr(1,b.length-2)),this.root.fire.apply(this.root,[this.n.toString(),a].concat(b))},j=function(a){var b=this._ractive;b.events[a.type].fire({node:this,original:a,index:b.index,keypath:b.keypath,context:b.root.get(b.keypath)})},i={},k=function(a){return i[a]?i[a]:i[a]=function(b){var c=b.node._ractive;b.index=c.index,b.keypath=c.keypath,b.context=c.root.get(c.keypath),c.events[a].fire(b)}},c}($,Wc),cd=function(a){return function(b,c){var d,e,f;for(e in c)if(c.hasOwnProperty(e))for(f=e.split("-"),d=f.length;d--;)a(b,f[d],c[e])}}(bd),dd=function(a){var b,c,d,e,f;b=a.root;do for(c=b._liveQueries,d=c.length;d--;)e=c[d],f=c["_"+e],f._test(a)&&(a.liveQueries||(a.liveQueries=[])).push(f);while(b=b._parent)},ed=function(){if(this._inited)throw new Error("Cannot initialize a transition more than once");this._inited=!0,this._fn.apply(this.root,[this].concat(this.params))},fd=function(a,b,c){var d,e,f;return a?(e={},f=c("div").style,d=function(a){var c,d,g;if(!e[a])if(void 0!==f[a])e[a]=a;else for(g=a.charAt(0).toUpperCase()+a.substring(1),c=b.length;c--;)if(d=b[c],void 0!==f[d+g]){e[a]=d+g;break}return e[a]}):d=null,d}(h,q,g),gd=function(a,b,c,d){var e,f;return b?(f=window.getComputedStyle||a.getComputedStyle,e=function(a){var b,e,f,g,h;if(b=window.getComputedStyle(this.node),"string"==typeof a)return h=b[d(a)],"0px"===h&&(h=0),h;if(!c(a))throw new Error("Transition#getStyle must be passed a string, or an array of strings representing CSS properties");for(e={},f=a.length;f--;)g=a[f],h=b[d(g)],"0px"===h&&(h=0),e[g]=h;return e}):e=null,e}(c,h,F,fd),hd=function(a){return function(b,c){var d;if("string"==typeof b)this.node.style[a(b)]=c;else for(d in b)b.hasOwnProperty(d)&&(this.node.style[a(d)]=b[d]);return this}}(fd),id=function(a){return a.replace(/-([a-zA-Z])/g,function(a,b){return b.toUpperCase()})},jd=function(a,b,c){function d(a){return a}var e=function(e){var f;this.duration=e.duration,this.step=e.step,this.complete=e.complete,"string"==typeof e.easing?(f=e.root.easing[e.easing],f||(a('Missing easing function ("'+e.easing+'"). You may need to download a plugin from [TODO]'),f=d)):f="function"==typeof e.easing?e.easing:d,this.easing=f,this.start=b(),this.end=this.start+this.duration,this.running=!0,c.add(this)};return e.prototype={tick:function(a){var b,c;return this.running?a>this.end?(this.step&&this.step(1),this.complete&&this.complete(1),!1):(b=a-this.start,c=this.easing(b/this.duration),this.step&&this.step(c),!0):!1},stop:function(){this.abort&&this.abort(),this.running=!1}},e}($,s,E),kd=function(a){var b=new RegExp("^-(?:"+a.join("|")+")-");return function(a){return a.replace(b,"")}}(q),ld=function(a){var b=new RegExp("^(?:"+a.join("|")+")([A-Z])");return function(a){var c;return a?(b.test(a)&&(a="-"+a),c=a.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()})):""}}(q),md=function(a,b,c,d,e,f,g,h,i){var j,k,l,m,n,o,p,q,r={},s={};return a?(k=c("div").style,function(){void 0!==k.transition?(l="transition",m="transitionend",n=!0):void 0!==k.webkitTransition?(l="webkitTransition",m="webkitTransitionEnd",n=!0):n=!1}(),l&&(o=l+"Duration",p=l+"Property",q=l+"TimingFunction"),j=function(a,c,j,k,l,n){setTimeout(function(){var t,u,v,w;w=function(){u&&v&&n()},t=a.node.namespaceURI+a.node.tagName,a.node.style[p]=k.map(g).map(i).join(","),a.node.style[q]=i(j.easing||"linear"),a.node.style[o]=j.duration/1e3+"s",l=function(b){var c;c=k.indexOf(d(h(b.propertyName))),-1!==c&&k.splice(c,1),k.length||(a.root.fire(a.name+":end"),a.node.removeEventListener(m,l,!1),v=!0,w())},a.node.addEventListener(m,l,!1),setTimeout(function(){for(var h,i,n,o,p=k.length,q=[];p--;)o=k[p],h=t+o,r[h]?a.node.style[g(o)]=c[o]:i=a.getStyle(o),void 0===r[h]&&(a.node.style[g(o)]=c[o],r[h]=a.getStyle(o)!=c[o],s[h]=!r[h]),s[h]&&(n=k.indexOf(o),-1===n?b("Something very strange happened with transitions. If you see this message, please let @RactiveJS know. Thanks!"):k.splice(n,1),a.node.style[g(o)]=i,q.push({name:g(o),interpolator:e(i,c[o])}));q.length?new f({root:a.root,duration:j.duration,easing:d(j.easing),step:function(b){var c,d;for(d=q.length;d--;)c=q[d],a.node.style[c.name]=c.interpolator(b)},complete:function(){u=!0,w()}}):u=!0,k.length||(a.node.removeEventListener(m,l,!1),v=!0,w())},0)},j.delay||0)}):j=null,j}(h,$,g,id,bb,jd,fd,kd,ld),nd=function(a,b,c,d,e,f){var g,h;return b?(h=window.getComputedStyle||a.getComputedStyle,g=function(a,b,g,h){var i,j=this;"string"==typeof a?(i={},i[a]=b):(i=a,h=g,g=b),g||(c('The "'+j.name+'" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340'),g=j,h=j.complete);var k=new d(function(a){var b,c,d,h,k,l,m,n;if(!g.duration)return j.setStyle(i),void a();for(b=Object.keys(i),c=[],d=window.getComputedStyle(j.node),k={},m=b.length;m--;)n=b[m],h=d[e(n)],"0px"===h&&(h=0),h!=i[n]&&(c.push(n),j.node.style[e(n)]=h);return c.length?void f(j,i,g,c,l,a):void a()});return h&&(c("t.animateStyle returns a Promise as of 0.4.0. Transition authors should do t.animateStyle(...).then(callback)"),k.then(h)),k}):g=null,g}(c,h,$,o,fd,md),od=function(a,b){var c;for(c in b)!b.hasOwnProperty(c)||c in a||(a[c]=b[c]);return a},pd=function(a){return function(b,c){return"number"==typeof b?b={duration:b}:"string"==typeof b?b="slow"===b?{duration:600}:"fast"===b?{duration:200}:{duration:400}:b||(b={}),a(b,c)}}(od),qd=function(){this.originalStyle?this.node.setAttribute("style",this.originalStyle):(this.node.getAttribute("style"),this.node.removeAttribute("style"))},rd=function(a,b,c,d,e,f,g,h){var i,j;return i={args:!0},j=function(c,d,e,f){var g,h,j,k=this;if(this.root=d,this.node=e.node,this.isIntro=f,this.originalStyle=this.node.getAttribute("style"),k.complete=function(a){!a&&k.isIntro&&k.resetStyle(),k.node._ractive.transition=null,k._manager.remove(k)},g=c.n||c,"string"!=typeof g&&(h=new b({descriptor:g,root:this.root,owner:e}),g=h.toString(),h.teardown()),this.name=g,c.a?this.params=c.a:c.d&&(h=new b({descriptor:c.d,root:this.root,owner:e}),this.params=h.getValue(i),h.teardown()),this._fn=d.transitions[g],!this._fn){if(j='Missing "'+g+'" transition. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#transitions',d.debug)throw new Error(j);return void a(j)}},j.prototype={init:c,getStyle:d,setStyle:e,animateStyle:f,processParams:g,resetStyle:h},j}($,Wc,ed,gd,hd,nd,pd,qd),sd=function(a,b){return function(c,d,e,f){var g,h,i;!d.transitionsEnabled||d._parent&&!d._parent.transitionsEnabled||(g=new b(c,d,e,f),g._fn&&(h=g.node,(i=h._ractive.transition)&&i.complete(),h._ractive.transition=g,a.addTransition(g)))}}(D,rd),td=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){function r(a){do if("select"===a.lcName)return a;while(a=a.parent)}return function(s,t,u){var v,w,x,y,z,A,B,C,D,E,F,G;if(s.type=b.ELEMENT,v=s.parentFragment=t.parentFragment,w=v.pNode,x=s.descriptor=t.descriptor,s.parent=t.pElement||v.pElement,s.root=E=v.root,s.index=t.index,s.lcName=x.e.toLowerCase(),s.eventListeners=[],s.customEventListeners=[],s.cssDetachQueue=[],"option"===s.lcName&&(s.select=r(s.parent)),w&&(y=s.namespace=i(x,w),z=y!==c.html?q(x.e):x.e,s.node=g(z,y),E.css&&w===E.el&&s.node.setAttribute("data-rvcguid",E.constructor._guid||E._guid),e(s.node,"_ractive",{value:{proxy:s,keypath:h(v),index:v.indexRefs,events:d(null),root:E}})),A=k(s,x.a),x.f){if(s.node&&s.node.getAttribute("contenteditable")&&s.node.innerHTML){if(G="A pre-populated contenteditable element should not have children",E.debug)throw new Error(G);f(G)}l(s,s.node,x,u)}u&&x.v&&n(s,x.v),u&&(E.twoway&&(s.bind(),s.node.getAttribute("contenteditable")&&s.node._ractive.binding&&s.node._ractive.binding.update()),A.name&&!A.name.twoway&&A.name.update(),"IMG"===s.node.tagName&&((B=s.attributes.width)||(C=s.attributes.height))&&s.node.addEventListener("load",D=function(){B&&(s.node.width=B.value),C&&(s.node.height=C.value),s.node.removeEventListener("load",D,!1)},!1),u.appendChild(s.node),x.o&&m(x.o,E,s),(x.t0||x.t1)&&p(x.t0||x.t1,E,s,!0),"OPTION"===s.node.tagName&&("SELECT"===w.tagName&&(F=w._ractive.binding)&&F.deferUpdate(),A.value||j(s,"value",x.f),s.node._ractive.value==w._ractive.value&&(s.node.selected=!0)),s.node.autofocus&&a.focus(s.node)),o(s)}}(D,K,f,Hb,i,$,g,y,kc,Yc,Zc,$c,ad,cd,dd,sd,lc),ud=function(a,b){function c(a){var b,c,d;for(d=a.liveQueries.length;d--;)b=a.liveQueries[d],c=b.selector,b._remove(a.node)}return function(d){var e,f,g;for(d&&(this.willDetach=!0,a.detachWhenReady(this)),this.fragment&&this.fragment.teardown(!1);this.attributes.length;)this.attributes.pop().teardown();if(this.node){for(e in this.node._ractive.events)this.node._ractive.events[e].teardown();(f=this.node._ractive.binding)&&(f.teardown(),g=this.root._twowayBindings[f.attr.keypath],g.splice(g.indexOf(f),1))}this.decorator&&this.decorator.teardown(),(this.descriptor.t0||this.descriptor.t2)&&b(this.descriptor.t0||this.descriptor.t2,this.root,this,!1),this.liveQueries&&c(this)}}(D,sd),vd=function(a){return function(b,c,d,e){var f,g,h,i,j,k,l,m,n;for(f=this.attributes.length;f--;)this.attributes[f].reassign(b,c,d,e);if(g=this.node._ractive){a(g,"keypath",d,e),void 0!=b&&(g.index[b]=c);for(h in g.events)for(i=g.events[h].proxies,f=i.length;f--;)j=i[f],"object"==typeof j.n&&j.a.reassign(b,c,d,e),j.d&&j.d.reassign(b,c,d,e);(k=g.binding)&&k.keypath.substr(0,d.length)===d&&(l=g.root._twowayBindings[k.keypath],l.splice(l.indexOf(k),1),k.keypath=k.keypath.replace(d,e),l=g.root._twowayBindings[k.keypath]||(g.root._twowayBindings[k.keypath]=[]),l.push(k))}if(this.fragment&&this.fragment.reassign(b,c,d,e),m=this.liveQueries)for(n=this.root,f=m.length;f--;)m[f]._makeDirty()}}(Mb),wd=function(){var a=/^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i;return a}(),xd=function(a,b){function c(a){var c,d,e,f,g,h,i;if(d=a.attributes.value,d.value)c=d.value;else{if(e=d.interpolator,!e)return;c=a.root.get(e.keypath||e.ref)}if(f=a.select.attributes.value,g=f.interpolator){if(h=a.root.get(g.keypath||g.ref),h==c)return!0;if(a.select.attributes.multiple&&b(h))for(i=h.length;i--;)if(h[i]==c)return!0}}function d(a){var b,c,d,e;return b=a.attributes,c=b.type,d=b.value,e=b.name,c&&"radio"===c.value&&d&&e.interpolator&&d.value===e.interpolator.value?!0:void 0}function e(a){var b=a.toString();return b?" "+b:""}return function(){var b;return b="<"+(this.descriptor.y?"!doctype":this.descriptor.e),b+=this.attributes.map(e).join(""),"option"===this.lcName&&c(this)&&(b+=" selected"),"input"===this.lcName&&d(this)&&(b+=" checked"),b+=">",this.fragment&&(b+=this.fragment.toString()),a.test(this.descriptor.e)||(b+="</"+this.descriptor.e+">"),this.stringifying=!1,b}}(wd,F),yd=function(a){return function(b){return a(this.node,b)?this.node:this.fragment&&this.fragment.find?this.fragment.find(b):void 0}}(gb),zd=function(a,b){b._test(this,!0)&&b.live&&(this.liveQueries||(this.liveQueries=[])).push(b),this.fragment&&this.fragment.findAll(a,b)},Ad=function(a){return this.fragment?this.fragment.findComponent(a):void 0},Bd=function(a,b){this.fragment&&this.fragment.findAllComponents(a,b)},Cd=function(){var a=this.attributes;if(this.node&&(this.binding&&(this.binding.teardown(),this.binding=null),!(this.node.getAttribute("contenteditable")&&a.value&&a.value.bind())))switch(this.lcName){case"select":case"textarea":return void(a.value&&a.value.bind());case"input":if("radio"===this.node.type||"checkbox"===this.node.type){if(a.name&&a.name.bind())return;if(a.checked&&a.checked.bind())return}if(a.value&&a.value.bind())return}},Dd=function(a,b,c,d,e,f,g,h,i,j,k){var l=function(a,b){c(this,a,b)};return l.prototype={detach:function(){var c;if(this.node)return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this.node;if(this.cssDetachQueue.length){for(a.start();c===this.cssDetachQueue.pop();)b.remove(c);a.end()}},teardown:d,reassign:e,firstNode:function(){return this.node},findNextNode:function(){return null},bubble:function(){},toString:f,find:g,findAll:h,findComponent:i,findAllComponents:j,bind:k},l}(D,v,td,ud,vd,xd,yd,zd,Ad,Bd,Cd),Ed={missingParser:"Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser"},Fd={},Gd=function(){var a=/^[^\s=]+/,b=/^\s+/;return function(c){var d,e,f;return c.matchString("=")?(d=c.pos,c.allowWhitespace(),(e=c.matchPattern(a))?c.matchPattern(b)?(f=c.matchPattern(a))?(c.allowWhitespace(),c.matchString("=")?[e,f]:(c.pos=d,null)):(c.pos=d,null):null:(c.pos=d,null)):null}}(),Hd=function(a){var b={"#":a.SECTION,"^":a.INVERTED,"/":a.CLOSING,">":a.PARTIAL,"!":a.COMMENT,"&":a.TRIPLE};return function(a){var c=b[a.str.charAt(a.pos)];return c?(a.pos+=1,c):null}}(K),Id=function(a,b){function c(b,c){for(var d,e=[];c.t===a.MEMBER&&c.r.t===a.REFINEMENT;)d=c.r,e.unshift(d.x?d.x.t===a.REFERENCE?d.x:b.flattenExpression(d.x):d.n),c=c.x;return c.t!==a.REFERENCE?null:{r:c.n,m:e}}var d,e=/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,f=/^[0-9][1-9]*$/,g=/(if|unless|with|each|try)\b/;return d={"if":a.SECTION_IF,unless:a.SECTION_UNLESS,"with":a.SECTION_WITH,each:a.SECTION_EACH},function(h,i){var j,k,l,m,n,o,p,q,r,s,t;if(j=h.pos,l={},i)l.t=a.TRIPLE;else if((o=h.readExpression())&&(l.t=a.INTERPOLATOR,h.allowWhitespace(),h.matchString(h.delimiters[1])?h.pos-=h.delimiters[1].length:(h.pos=j,o=null)),!o)if(m=b(h),l.t=m||a.INTERPOLATOR,m===a.SECTION&&h.handlebars)n=h.matchPattern(g),n&&d[n]&&(l.n=d[n],h.allowWhitespace());else if(m===a.INVERTED)l.t=a.SECTION,l.n=a.SECTION_UNLESS;else if((m===a.COMMENT||m===a.CLOSING)&&(q=h.remaining(),r=q.indexOf(h.delimiters[1]),-1!==r))return l.r=q.substr(0,r),h.pos+=r,l;if(!o&&(h.allowWhitespace(),o=h.readExpression(),q=h.remaining(),s=i?h.tripleDelimiters[1]:h.delimiters[1],q.substr(0,s.length)!==s&&":"!==q.charAt(0))){if(k=h.pos,h.pos=j,q=h.remaining(),r=q.indexOf(h.delimiters[1]),-1!==r)return l.r=q.substr(0,r).trim(),h.pos+=r,l;h.pos=k}if(o){for(;o.t===a.BRACKETED&&o.x;)o=o.x;o.t===a.REFERENCE?l.r=o.n:o.t===a.NUMBER_LITERAL&&f.test(o.v)?l.r=o.v:(t=c(h,o))?l.kx=t:l.x=h.flattenExpression(o)}return(p=h.matchPattern(e))&&(l.i=p),l}}(K,Hd),Jd=function(a,b,c){function d(a){var b=a.tripleDelimiters[0].length>a.delimiters[0].length;return e(a,b)||e(a,!b)}function e(d,e){var g,h,j,k,l,m,n,o,p,q;if(g=d.pos,h=d.getLinePos(),k=e?d.tripleDelimiters:d.delimiters,!d.matchString(k[0]))return null;if(j=b(d))return d.matchString(k[1])?(d[e?"tripleDelimiters":"delimiters"]=j,i):null;if(d.allowWhitespace(),j=c(d,e),null===j)return d.pos=g,null;if(d.allowWhitespace(),d.matchString(k[1])||d.error("Expected closing delimiter '"+k[1]+"' after reference"),j.t===a.COMMENT&&(j.exclude=!0),j.t===a.SECTION){if(l=[],o=l,d.options.strict||d.handlebars)switch(j.n){case a.SECTION_IF:m="if";break;case a.SECTION_EACH:m="each";break;case a.SECTION_UNLESS:m="unless";break;case a.SECTION_WITH:m="with"}for(;p=d.read();){if(p.t===a.CLOSING){m&&p.r!==m&&d.error("Expected {{/"+m+"}}");
break}if(d.handlebars&&p.t===a.INTERPOLATOR&&"else"===p.r)switch(j.n){case a.SECTION_IF:case a.SECTION_EACH:o=n=[];continue;case a.SECTION_UNLESS:d.error("{{else}} not allowed in {{#unless}}");break;case a.SECTION_WITH:d.error("{{else}} not allowed in {{#with}}")}o.push(p)}l.length&&(j.f=l,!j.i&&j.n===a.SECTION_EACH&&(q=f(j.f))&&(j.i=q)),n&&n.length&&(j.l=n)}return d.includeLinePositions&&(j.p=h.toJSON()),j}function f(b){var c,d,e;for(c=b.length;c--;){if(d=b[c],d.t===a.ELEMENT&&d.f&&(e=f(d.f)))return e;if(d.t===a.INTERPOLATOR||d.t===a.TRIPLE||d.t===a.SECTION){if(d.r&&j.test(d.r))return d.r;if(d.x&&(e=g(d.x)))return e;if(d.kx&&(e=h(d.kx)))return e}}}function g(a){var b;for(b=a.r.length;b--;)if(j.test(a.r[b]))return a.r[b]}function h(b){var c,d,e;for(c=b.m.length;c--;){if(e=b.m[c],e.r&&(d=g(e)))return d;if(e.t===a.REFERENCE&&j.test(e.n))return e.n}}var i={t:a.DELIMCHANGE,exclude:!0},j=/^@(?:index|key)$/;return d}(K,Gd,Id),Kd=function(a){var b="<!--",c="-->";return function(d){var e,f,g,h,i;return e=d.getLinePos(),d.matchString(b)?(g=d.remaining(),h=g.indexOf(c),-1===h&&d.error("Illegal HTML - expected closing comment sequence ('-->')"),f=g.substr(0,h),d.pos+=h+3,i={t:a.COMMENT,c:f},d.includeLinePositions&&(i.p=e.toJSON()),i):null}}(K),Ld=function(a,b){var c,d,e;for(c=b.length;c--;){if(d=a.indexOf(b[c]),!d)return 0;-1!==d&&(!e||e>d)&&(e=d)}return e||-1},Md=function(){function a(a){return a?10===a?32:128>a?a:159>=a?c[a-128]:55296>a?a:57343>=a?65533:65535>=a?a:65533:65533}var b,c,d,e,f;return b={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},c=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],d=new RegExp("&("+Object.keys(b).join("|")+");?","g"),e=/&#x([0-9]+);?/g,f=/&#([0-9]+);?/g,function(c){var g;return g=c.replace(d,function(a,c){return b[c]?String.fromCharCode(b[c]):a}),g=g.replace(e,function(b,c){return String.fromCharCode(a(parseInt(c,16)))}),g=g.replace(f,function(b,c){return String.fromCharCode(a(c))})}}(),Nd=function(a,b){return function(c){var d,e,f;return e=c.remaining(),f=c.inside?"</"+c.inside:"<",(d=c.inside&&!c.interpolate[c.inside]?e.indexOf(f):a(e,[f,c.delimiters[0],c.tripleDelimiters[0]]))?(-1===d&&(d=e.length),c.pos+=d,b(e.substr(0,d))):null}}(Ld,Md),Od=function(a){var b=/^([a-zA-Z]{1,}:?[a-zA-Z0-9\-]*)\s*\>/;return function(c){var d;return c.matchString("</")?(d=c.matchPattern(b))?{t:a.CLOSING_TAG,e:d}:(c.pos-=2,void c.error("Illegal closing tag")):null}}(K),Pd=function(a,b){function c(a){var b,c,e;return a.allowWhitespace(),(c=a.matchPattern(i))?(b={name:c},e=d(a),e&&(b.value=e),b):null}function d(a){var b,c;return b=a.pos,a.allowWhitespace(),a.matchString("=")?(a.allowWhitespace(),c=g(a,"'")||g(a,'"')||f(a),null===c?(a.pos=b,null):1===c.length&&"string"==typeof c[0]?c[0]:c):(a.pos=b,null)}function e(a){var b,c,d;return b=a.pos,(c=a.matchPattern(j))?(-1!==(d=c.indexOf(a.delimiters[0]))&&(c=c.substr(0,d),a.pos=b+c.length),c):null}function f(a){var c,d;for(c=[],d=b(a)||e(a);null!==d;)c.push(d),d=b(a)||e(a);return c.length?c:null}function g(a,c){var d,e,f;if(d=a.pos,!a.matchString(c))return null;for(e=[],f=b(a)||h(a,c);null!==f;)e.push(f),f=b(a)||h(a,c);return a.matchString(c)?e:(a.pos=d,null)}function h(b,c){var d,e,f;return d=b.pos,f=b.remaining(),e=a(f,[c,b.delimiters[0],b.delimiters[1]]),-1===e&&b.error("Quoted attribute value must have a closing quote"),e?(b.pos+=e,f.substr(0,e)):null}var i=/^[^\s"'>\/=]+/,j=/^[^\s"'=<>`]+/;return c}(Ld,Jd),Qd=function(a){return function(b){var c,d,e,f,g,h;if("string"==typeof b){if(-1===b.indexOf(":"))return b;b=[b]}for(c={},f=[],g=[];b.length;)if(d=b.shift(),"string"==typeof d){if(e=d.indexOf(":"),-1!==e){e&&f.push(d.substr(0,e)),d.length>e+1&&(g[0]=d.substring(e+1));break}f.push(d)}else f.push(d);return g=g.concat(b),g.length||"string"!=typeof f?(c={n:1===f.length&&"string"==typeof f[0]?f[0]:f},1===g.length&&"string"==typeof g[0]?(h=a("["+g[0]+"]"),c.a=h?h.value:g[0]):c.d=g):c=f,c}}(Rc),Rd=function(a,b,c,d,e,f,g,h){function i(c){var d,e,f,i,r,s,t,u,v,w,x,y;if(d=c.pos,e=c.getLinePos(),c.inside)return null;if(!c.matchString("<"))return null;if("/"===c.nextChar())return null;if(f={t:a.ELEMENT},c.includeLinePositions&&(f.p=e.toJSON()),c.matchString("!")&&(f.y=1),f.e=c.matchPattern(k),!f.e)return null;for(l.test(c.nextChar())||c.error("Illegal tag name"),t=function(a){var b=v.n||v;o.test(b)&&(c.pos-=b.length,c.error("Cannot use reserved event names (change, reset, teardown, update)")),f.v[a]=v};u=g(c);)(r=p[u.name])?f[r]=h(u.value):(s=n.exec(u.name))?(f.v||(f.v={}),v=h(u.value),s[1].split("-").forEach(t)):c.sanitizeEventAttributes&&m.test(u.name)||(f.a||(f.a={}),f.a[u.name]=u.value||0);if(c.allowWhitespace(),c.matchString("/")&&(w=!0),!c.matchString(">"))return null;if(i=f.e.toLowerCase(),!w&&!b.test(f.e)){for(("script"===i||"style"===i)&&(c.inside=i),x=[];(y=c.read(j))&&y.t!==a.CLOSING&&y.t!==a.CLOSING_TAG;)x.push(y);x.length&&(f.f=x)}return c.inside=null,c.sanitizeElements&&-1!==c.sanitizeElements.indexOf(i)?q:f}var j,k=/^[a-zA-Z]{1,}:?[a-zA-Z0-9\-]*/,l=/^[\s\n\/>]/,m=/^on/,n=/^on-([a-zA-Z$_][a-zA-Z$_0-9\-]+)/,o=/^(?:change|reset|teardown|update)$/,p={"intro-outro":"t0",intro:"t1",outro:"t2",decorator:"o"},q={exclude:!0};return j=[c,d,i,e,f],i}(K,wd,Jd,Kd,Nd,Od,Pd,Qd),Sd=function(){var a=/^[ \t\f\r\n]+/,b=/[ \t\f\r\n]+$/;return function(c){var d;d=c[0],"string"==typeof d&&(d=d.replace(a,""),d?c[0]=d:c.shift()),d=c[c.length-1],"string"==typeof d&&(d=d.replace(b,""),d?c[c.length-1]=d:c.pop())}}(),Td=function(a){function b(a){return"string"==typeof a}function c(b){return b.t===a.COMMENT||b.t===a.DELIMCHANGE}function d(b){return(b.t===a.SECTION||b.t===a.INVERTED)&&b.f}var e=/^\s*\r?\n/,f=/\r?\n\s*$/;return function(a){var g,h,i,j,k;for(g=1;g<a.length;g+=1)h=a[g],i=a[g-1],j=a[g-2],b(h)&&c(i)&&b(j)&&f.test(j)&&e.test(h)&&(a[g-2]=j.replace(f,"\n"),a[g]=h.replace(e,"")),d(h)&&b(i)&&f.test(i)&&b(h.f[0])&&e.test(h.f[0])&&(a[g-1]=i.replace(f,"\n"),h.f[0]=h.f[0].replace(e,"")),b(h)&&d(i)&&(k=i.f[i.f.length-1],b(k)&&f.test(k)&&e.test(h)&&(i.f[i.f.length-1]=k.replace(f,"\n"),a[g]=h.replace(e,"")));return a}}(K),Ud=function(a,b,c,d,e,f,g,h){function i(b,c,d,e){var f,j,k,l,n;for(h(b),f=b.length;f--;)if(j=b[f],j.exclude?b.splice(f,1):c&&j.t===a.COMMENT&&b.splice(f,1),j.f&&(k=j.t===a.ELEMENT&&p.test(j.e),i(j.f,c,d||k,e),d||j.t!==a.ELEMENT||g(j.f)),j.l&&(i(j.l,c,d,e),e&&(l={t:4,r:j.r,n:a.SECTION_UNLESS,f:j.l},b.splice(f+1,0,l),delete j.l)),j.a)for(n in j.a)j.a.hasOwnProperty(n)&&"string"!=typeof j.a[n]&&i(j.a[n],c,d,e);for(f=b.length;f--;)"string"==typeof b[f]&&("string"==typeof b[f+1]&&(b[f]=b[f]+b[f+1],b.splice(f+1,1)),d||(b[f]=b[f].replace(m," ")))}var j,k,l,m=/[ \t\f\r\n]+/g,n=/<!--\s*\{\{\s*>\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*}\}\s*-->/,o=/<!--\s*\{\{\s*\/\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*}\}\s*-->/,p=/^(?:pre|script|style|textarea)$/i;return j=b.extend({init:function(a,b){this.delimiters=b.delimiters||["{{","}}"],this.tripleDelimiters=b.tripleDelimiters||["{{{","}}}"],this.interpolate={script:!b.interpolate||b.interpolate.script!==!1,style:!b.interpolate||b.interpolate.style!==!1},b.sanitize===!0&&(b.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),eventAttributes:!0}),this.sanitizeElements=b.sanitize&&b.sanitize.elements,this.sanitizeEventAttributes=b.sanitize&&b.sanitize.eventAttributes,this.includeLinePositions=b.includeLinePositions,this.handlebars=b.handlebars},postProcess:function(a,b){return i(a,b.stripComments!==!1,b.preserveWhitespace,b.rewriteElse!==!1),b.preserveWhitespace||g(a),a},converters:[c,d,e,f]}),k=function(a,b){var c;return b=b||{},n.test(a)?l(a,b):(c=new j(a,b),c.leftover&&c.error("Unexpected character"),c.result)},l=function(a,b){var c,d,e,f,g,h;for(e={},c="",d=a;g=n.exec(d);){if(f=g[1],c+=d.substr(0,g.index),d=d.substring(g.index+g[0].length),h=o.exec(d),!h||h[1]!==f)throw new Error("Inline partials must have a closing delimiter, and cannot be nested");e[f]=k(d.substr(0,h.index),b),d=d.substring(h.index+h[0].length)}return{main:k(c,b),partials:e}},k}(K,Qc,Jd,Kd,Rd,Nd,Sd,Td),Vd=function(){function a(a,b){var d=c.exec(b)[0];return null===a||d.length<a.length?d:a}var b=/^\s*$/,c=/^\s*/;return function(c){var d,e,f,g;return d=c.split("\n"),e=d[0],void 0!==e&&b.test(e)&&d.shift(),f=d[d.length-1],void 0!==f&&b.test(f)&&d.pop(),g=d.reduce(a,null),g&&(c=d.map(function(a){return a.replace(g,"")}).join("\n")),c}}(),Wd=function(a,b,c,d,e,f,g){function h(b,c){var d;if(b.partials[c]){if("string"==typeof b.partials[c]){if(!f)throw new Error(a.missingParser);d=f(b.partials[c],b.parseOptions),i(d,c,b.partials)}return b.partials[c]}}function i(a,b,c){var e;if(d(a)){c[b]=a.main;for(e in a.partials)a.partials.hasOwnProperty(e)&&(c[e]=a.partials[e])}else c[b]=a}return function(d,j){var k,l,m;if(l=h(d,j))return l;if(b&&(k=document.getElementById(j),k&&"SCRIPT"===k.tagName)){if(!f)throw new Error(a.missingParser);i(f(g(k.text),d.parseOptions),j,e)}if(l=e[j],!l){if(m='Could not find descriptor for partial "'+j+'"',d.debug)throw new Error(m);return c(m),[]}return l}}(Ed,h,$,_,Fd,Ud,Vd),Xd=function(a,b){var c;return b?c=a.split("\n").map(function(a,c){return c?b+a:a}).join("\n"):a},Yd=function(a,b,c,d){var e,f;return d.push(function(){f=d.DomFragment}),e=function(c,d){var e,g=this.parentFragment=c.parentFragment;if(this.type=a.PARTIAL,this.name=c.descriptor.r,this.index=c.index,!c.descriptor.r)throw new Error("Partials must have a static reference (no expressions). This may change in a future version of Ractive.");e=b(g.root,c.descriptor.r),this.fragment=new f({descriptor:e,root:g.root,pNode:g.pNode,owner:this}),d&&d.appendChild(this.fragment.docFrag)},e.prototype={firstNode:function(){return this.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},detach:function(){return this.fragment.detach()},reassign:function(a,b,c,d){return this.fragment.reassign(a,b,c,d)},teardown:function(a){this.fragment.teardown(a)},toString:function(){var b,d,e,f;return b=this.fragment.toString(),d=this.parentFragment.items[this.index-1],d&&d.type===a.TEXT?(e=d.descriptor.split("\n").pop(),(f=/^\s+$/.exec(e))?c(b,f[0]):b):b},find:function(a){return this.fragment.find(a)},findAll:function(a,b){return this.fragment.findAll(a,b)},findComponent:function(a){return this.fragment.findComponent(a)},findAllComponents:function(a,b){return this.fragment.findAllComponents(a,b)}},e}(K,Wd,Xd,t),Zd=function(a,b){var c,d;return c={parse:!0},d=function(a,d,e){this.parentFragment=a.parentFragment,this.component=a,this.key=d,this.fragment=new b({descriptor:e,root:a.root,owner:this}),this.selfUpdating=this.fragment.isSimple(),this.value=this.fragment.getValue(c)},d.prototype={bubble:function(){this.selfUpdating?this.update():!this.deferred&&this.ready&&(a.addAttribute(this),this.deferred=!0)},update:function(){var a=this.fragment.getValue(c);this.component.instance.set(this.key,a),this.value=a},teardown:function(){this.fragment.teardown()}},d}(D,Wc),$d=function(a,b,c,d,e){function f(f,g,h,i){var j,k,l,m,n,o;return l=f.root,m=f.parentFragment,"string"==typeof h?(k=b(h),k?k.value:h):null===h?!0:1===h.length&&h[0].t===a.INTERPOLATOR&&h[0].r?m.indexRefs&&void 0!==m.indexRefs[o=h[0].r]?(f.indexRefBindings[o]=g,m.indexRefs[o]):(n=c(l,h[0].r,m)||h[0].r,i.push({childKeypath:g,parentKeypath:n}),d(l,n)):(j=new e(f,g,h),f.complexParameters.push(j),j.value)}return function(a,b,c,d){var e,g,h={};a.complexParameters=[];for(e in c)c.hasOwnProperty(e)&&(g=f(a,e,c[e],d),(void 0!==g||void 0===b[e])&&(h[e]=g));return h}}(K,Rc,z,Z,Zd),_d=function(){function a(a,b){var c,d,e;if(c=a.adapt.length?a.adapt.map(function(b){return"object"==typeof b?b:a.adaptors[b]||b}):[],d=b.length)for(e=0;d>e;e+=1)-1===c.indexOf(b[e])&&c.push(b[e]);return c}return function(b,c,d,e,f){var g,h,i,j,k;return h=b.parentFragment,j=b.root,i={content:f||[]},k=a(j,c.defaults.adapt,c.adaptors),g=new c({el:h.pNode,append:!0,data:d,partials:i,magic:j.magic||c.defaults.magic,modifyArrays:j.modifyArrays,_parent:j,_component:b,adapt:k}),e&&(g.insert(e),g.fragment.pNode=g.el=h.pNode),g}}(),ae=function(a,b,c){return function(d,e){e.forEach(function(e){var f,g;a(d,d.root,e.parentKeypath,e.childKeypath),f=b(d.instance,e.childKeypath),g=b(d.root,e.parentKeypath),void 0!==f&&void 0===g&&c(d.root,e.parentKeypath,f)})}}(W,Z,N),be=function(a){function b(b,d,e,f){if("string"!=typeof f){if(d.debug)throw new Error(c);return void a(c)}b.on(e,function(){var a=Array.prototype.slice.call(arguments);a.unshift(f),d.fire.apply(d,a)})}var c="Components currently only support simple events - you cannot include arguments. Sorry!";return function(a,c){var d;for(d in c)c.hasOwnProperty(d)&&b(a.instance,a.root,d,c[d])}}($),ce=function(a){var b,c;for(b=a.root;b;)(c=b._liveComponentQueries["_"+a.name])&&c.push(a.instance),b=b._parent},de=function(a,b,c,d,e,f,g){return function(h,i,j){var k,l,m,n,o;if(k=h.parentFragment=i.parentFragment,l=k.root,h.root=l,h.type=a.COMPONENT,h.name=i.descriptor.e,h.index=i.index,h.indexRefBindings={},h.bindings=[],m=l.components[i.descriptor.e],!m)throw new Error('Component "'+i.descriptor.e+'" not found');o=[],n=c(h,m.data||{},i.descriptor.a,o),d(h,m,n,j,i.descriptor.f),e(h,o),f(h,i.descriptor.v),(i.descriptor.t1||i.descriptor.t2||i.descriptor.o)&&b('The "intro", "outro" and "decorator" directives have no effect on components'),g(h)}}(K,$,$d,_d,ae,be,ce),ee=function(a,b){function c(a){var b,c;b=a.root;do(c=b._liveComponentQueries["_"+a.name])&&c._remove(a);while(b=b._parent)}var d=function(b,c){a(this,b,c)};return d.prototype={firstNode:function(){return this.instance.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},detach:function(){return this.instance.fragment.detach()},teardown:function(a){for(;this.complexParameters.length;)this.complexParameters.pop().teardown();for(;this.bindings.length;)this.bindings.pop().teardown();c(this),this.shouldDestroy=a,this.instance.teardown()},reassign:function(a,c,d,e){var f,g,h=this.instance,i=h._parent;this.bindings.forEach(function(f){var g;f.root===i&&(f.keypath===a&&h.set(f.otherKeypath,c),(g=b(f.keypath,d,e))&&f.reassign(g))}),(f=this.indexRefBindings[a])&&h.set(f,c),(g=this.root._liveComponentQueries["_"+this.name])&&g._makeDirty()},toString:function(){return this.instance.fragment.toString()},find:function(a){return this.instance.fragment.find(a)},findAll:function(a,b){return this.instance.fragment.findAll(a,b)},findComponent:function(a){return a&&a!==this.name?this.instance.fragment?this.instance.fragment.findComponent(a):null:this.instance},findAllComponents:function(a,b){b._test(this,!0),this.instance.fragment&&this.instance.fragment.findAllComponents(a,b)}},d}(de,Lb),fe=function(a,b){var c=function(b,c){this.type=a.COMMENT,this.descriptor=b.descriptor,c&&(this.node=document.createComment(b.descriptor.c),c.appendChild(this.node))};return c.prototype={detach:b,teardown:function(a){a&&this.detach()},firstNode:function(){return this.node},toString:function(){return"<!--"+this.descriptor.c+"-->"}},c}(K,Pb),ge=function(a,b,c,d,e,f,g,h,i,j,k,l){var m=function(a){a.pNode&&(this.docFrag=document.createDocumentFragment()),c.init(this,a)};return m.prototype={reassign:c.reassign,detach:function(){var a,b;if(this.docFrag){if(this.nodes)for(a=this.nodes.length,b=0;a>b;b+=1)this.docFrag.appendChild(this.nodes[b]);else if(this.items)for(a=this.items.length,b=0;a>b;b+=1)this.docFrag.appendChild(this.items[b].detach());return this.docFrag}},createItem:function(b){if("string"==typeof b.descriptor)return new d(b,this.docFrag);switch(b.descriptor.t){case a.INTERPOLATOR:return new e(b,this.docFrag);case a.SECTION:return new f(b,this.docFrag);case a.TRIPLE:return new g(b,this.docFrag);case a.ELEMENT:return this.root.components[b.descriptor.e]?new j(b,this.docFrag):new h(b,this.docFrag);case a.PARTIAL:return new i(b,this.docFrag);case a.COMMENT:return new k(b,this.docFrag);default:throw new Error("Something very strange happened. Please file an issue at https://github.com/ractivejs/ractive/issues. Thanks!")}},teardown:function(a){var b;if(this.nodes&&a)for(;b=this.nodes.pop();)b.parentNode.removeChild(b);else if(this.items)for(;this.items.length;)this.items.pop().teardown(a);this.nodes=this.items=this.docFrag=null},firstNode:function(){return this.items&&this.items[0]?this.items[0].firstNode():this.nodes?this.nodes[0]||null:null},findNextNode:function(a){var b=a.index;return this.items[b+1]?this.items[b+1].firstNode():this.owner===this.root?this.owner.component?this.owner.component.findNextNode():null:this.owner.findNextNode(this)},toString:function(){return this.items?this.items.join(""):""},find:function(a){var c,d,e,f,g;if(this.nodes){for(d=this.nodes.length,c=0;d>c;c+=1)if(f=this.nodes[c],1===f.nodeType){if(b(f,a))return f;if(g=f.querySelector(a))return g}return null}if(this.items){for(d=this.items.length,c=0;d>c;c+=1)if(e=this.items[c],e.find&&(g=e.find(a)))return g;return null}},findAll:function(a,c){var d,e,f,g,h,i,j;if(this.nodes){for(e=this.nodes.length,d=0;e>d;d+=1)if(g=this.nodes[d],1===g.nodeType&&(b(g,a)&&c.push(g),h=g.querySelectorAll(a)))for(i=h.length,j=0;i>j;j+=1)c.push(h[j])}else if(this.items)for(e=this.items.length,d=0;e>d;d+=1)f=this.items[d],f.findAll&&f.findAll(a,c);return c},findComponent:function(a){var b,c,d,e;if(this.items){for(b=this.items.length,c=0;b>c;c+=1)if(d=this.items[c],d.findComponent&&(e=d.findComponent(a)))return e;return null}},findAllComponents:function(a,b){var c,d,e;if(this.items)for(d=this.items.length,c=0;d>c;c+=1)e=this.items[c],e.findAllComponents&&e.findAllComponents(a,b);return b}},l.DomFragment=m,m}(K,gb,Ob,Qb,bc,hc,jc,Dd,Yd,ee,fe,t),he=function(a,b,c){function d(a){for(var b;b=a._childInitQueue.shift();)b.instance.init&&b.instance.init(b.options),d(b.instance)}return function(e,f,g){if(this._rendering=!0,a.start(this,g),!this._initing)throw new Error("You cannot call ractive.render() directly!");this.constructor.css&&b.add(this.constructor),this.fragment=new c({descriptor:this.template,root:this,owner:this,pNode:e}),e&&(f?e.insertBefore(this.fragment.docFrag,f):e.appendChild(this.fragment.docFrag)),this._parent&&this._parent._rendering||d(this),delete this._rendering,a.end()}}(D,v,ge),ie=function(a){return function(){return a("renderHTML() has been deprecated and will be removed in a future version. Please use toHTML() instead"),this.toHTML()}}($),je=[,"data","computed","adaptors","components","decorators","easing","events","interpolators","partials","transitions"],ke=function(a){for(var b,c,d=Array.prototype.slice.call(arguments,1);c=d.shift();)for(b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);return a},le=function(){function a(a){var c="var __ractive=this;return("+a.replace(b,function(a,b){return'__ractive.get("'+b+'")'})+")";return new Function(c)}var b=/\$\{([^\}]+)\}/g;return function(b){return"function"==typeof b?{get:b}:"string"==typeof b?{get:a(b)}:("object"==typeof b&&"string"==typeof b.get&&(b={get:a(b.get),set:b.set}),b)}}(),me=function(a,b,c){var d=function(a,c){this.root=a.ractive,this.keypath=c,this.priority=0,this.computation=a,b(this)};return d.prototype={update:function(){var b;b=this.root.get(this.keypath),a(b,this.value)||this.computation.bubble()},teardown:function(){c(this)}},d}(n,U,V),ne=function(a,b,c,d){function e(a,b,c){var e,f,g;for(e=b.length;e--;)f=b[e],c[f.keypath]||(b.splice(e,1),b[f.keypath]=null,f.teardown());for(e=c.length;e--;)g=c[e],b[g]||(f=new d(a,g),b.push(b[g]=f))}var f=function(a,b,c){this.ractive=a,this.key=b,this.getter=c.get,this.setter=c.set,this.watchers=[],this.update()};return f.prototype={set:function(a){if(this.setting)return void(this.value=a);if(!this.setter)throw new Error("Computed properties without setters are read-only in the current version");this.setter.call(this.ractive,a)},compute:function(){var b,c,d;b=this.ractive,c=b._captured,c||(b._captured=[]);try{this.value=this.getter.call(b)}catch(f){b.debug&&a('Failed to compute "'+this.key+'": '+f.message||f),d=!0}return e(this,this.watchers,b._captured),b._captured=c,d?!1:!0},update:function(){this.compute()&&(this.setting=!0,c(this.ractive,this.key,this.value),this.setting=!1),this.deferred=!1},bubble:function(){this.watchers.length<=1?this.update():this.deferred||(b.addComputation(this),this.deferred=!0)}},f}($,D,N,me),oe=function(a,b){return function(c,d){var e,f;for(e in d)f=a(d[e]),c._computations[e]=new b(c,e,f)}}(le,ne),pe=function(a,b,c){return function(d){return{fromId:function(a){var c;if(!b)throw new Error("Cannot retieve template #"+a+"as Ractive is not running in the client.");if("#"===a.charAt(0)&&(a=a.substring(1)),!(c=document.getElementById(a)))throw new Error("Could not find template element with id #"+a);return c.innerHTML},parse:function(b,e){if(!c)throw new Error(a.missingParser);return c(b,e||d)},isParsed:function(a){return!("string"==typeof a)}}}}(Ed,h,Ud),qe=function(a,b,c,d){return function(e,f,g){var h,i,j=e.template;h=new d(e.parseOptions),h.isParsed(j)?i=j:("#"===j.charAt(0)&&(j=h.fromId(j)),i=h.parse(j)),c(i)&&(b(e.partials,i.partials),i=i.main),i&&1===i.length&&"string"==typeof i[0]&&(i=i[0]),e.template=i,a(e.partials,g.partials)}}(ke,od,_,pe),re=function(a,b,c,d,e,f,g,h){function i(a,d){var e;return{"default":{getArg:function(){},extend:function(a,d){return c(b(a),d)},initialValue:function(b){return a[b]}},template:{getArg:function(){return e||(e=new h(a.parseOptions)),e},extend:function(a,b){return b},initialValue:function(a){return d[a]}}}}function j(b,c,h,j){function k(a){return!j.updatesOnly&&b[a]||j.updatesOnly&&r.indexOf(a)>-1}function l(){return m("data"),b.data||(b.data={}),q.filter(function(a){return"data"!==a}).filter(m)}function m(a){var d=j.newValues[a]||h[a],e=b.constructor[a]||c[a],f="data"===a?d:b.data,g=s[a]||s["default"],i=g.initialValue(a);return b[a]="function"==typeof d?d(f,h,g.getArg()):e?"function"==typeof e?e(f,h,g.getArg())||h[a]:g.extend(e,d):d?d:void 0,n(b[a],i)}function n(a,b){return a||b?o(a)&&o(b)?!1:p(a)&&p(b)?!1:a!==b:!1}function o(a){return e(a)&&!Object.keys(a).length}function p(a){return d(a)&&!a.length}var q,r,s=i(b,h);return j=j||{},j.newValues=j.newValues||{},q=j.registries?j.registries.filter(function(b){return a.indexOf(b)>-1}):a,r=l(),k("computed")&&f(b,b.computed),k("template")&&g(b,c,h),r}return a=a.concat(["template"]),j}(je,Hb,ke,F,_,oe,qe,pe),se=function(a,b){return function(c,d){var e,f;return c.transitionsEnabled=d.noIntro?!1:d.transitionsEnabled,a&&!c.el?c.el=document.createDocumentFragment():c.el&&!d.append&&(c.el.innerHTML=""),e=new b(function(a){f=a}),c.render(c.el,c.anchor,f),d.complete&&(e=e.then(d.complete.bind(c))),c.transitionsEnabled=d.transitionsEnabled,e}}(h,o),te=function(a,b,c,d,e,f){var g=["template","partials","components","decorators","events"].join();return function(h,i){var j,k,l,m,n,o;if("function"!=typeof h||i?h=h||{}:(i=h,h={}),"object"!=typeof h)throw new Error("The reset method takes either no arguments, or an object containing new data");for((l=this._wrapped[""])&&l.reset?l.reset(h)===!1&&(this.data=h):this.data=h,this.initOptions.data=this.data,m=e(this,this.constructor.defaults,this.initOptions,{updatesOnly:!0}),o=m.length;o--;)if(g.indexOf(m[o]>-1)){n=!0;break}return n?(this.teardown(),this._initing=!0,j=f(this,this.initOptions),this._initing=!1):(j=new a(function(a){k=a}),b.start(this,k),c(this,""),d(this,""),b.end(),this.fire("reset",h)),i&&j.then(i),j}}(o,D,L,B,re,se),ue=function(a,b,c){return function(d,e){var f,g,h={updatesOnly:!0,registries:["template","partials"]};return"function"!=typeof d||e||(e=d,d=void 0),d&&(h.newValues={template:d}),g=b(this,this.constructor.defaults,this.initOptions,h),g.length?(this.teardown(),this._initing=!0,f=c(this,this.initOptions),this._initing=!1):f=a.resolve(),e&&f.then(e),f}}(o,re,se),ve=function(a,b,c,d,e){return function(f,g,h){var i,j,k;if(j=new d(function(a){k=a}),a.start(this,k),b(f)){i=f,h=g;for(f in i)i.hasOwnProperty(f)&&(g=i[f],f=c(f),e(this,f,g))}else f=c(f),e(this,f,g);return a.end(),h&&j.then(h.bind(this)),j}}(D,_,p,o,N),we=function(a){return function(b,c){return a(this,b,void 0===c?-1:-c)}}(l),xe=function(a,b,c,d,e){return function(f){var g,h,i,j,k,l,m,n;if(this.fire("teardown"),j=!this.component||this.component.shouldDestroy,this.constructor.css)if(j)k=f,f=function(){k&&k.call(this),b.remove(this.constructor)};else{l=this.component.parentFragment;do l.owner.type===a.ELEMENT&&l.owner.willDetach&&(m=l.owner);while(!m&&(l=l.parent));if(!m)throw new Error("A component is being torn down but doesn't have a nearest detaching element... this shouldn't happen!");m.cssDetachQueue.push(this.constructor)}for(h=new d(function(a){i=a}),c.start(this,i),this.fragment.teardown(j);this._animations[0];)this._animations[0].stop();for(g in this._cache)e(this,g);for(;n=this._unresolvedImplicitDependencies.pop();)n.teardown();return c.end(),f&&h.then(f.bind(this)),h}}(K,v,D,o,L),ye=function(){return this.fragment.toString()},ze=function(a,b){var c;{if("string"==typeof a)return c=this.get(a),this.set(a,!c,b);if(this.debug)throw new Error("Bad arguments")}},Ae=function(a,b,c,d){return function(e,f){var g,h;return"function"==typeof e?(f=e,e=""):e=e||"",g=new b(function(a){h=a}),a.start(this,h),c(this,e),d(this,e),a.end(),this.fire("update",e),f&&g.then(f.bind(this)),g}}(D,o,L,B),Be=function(a,b,c){function d(a,e,f,g,h){var i,j,k,l,m,n;if(i=a._twowayBindings[e])for(k=i.length;k--;)l=i[k],(!l.radioName||l.node.checked)&&(l.checkboxName?l.changed()&&g[e]!==!0&&(g[e]=!0,g.push(e)):(m=l.attr.value,n=l.value(),b(m,n)||c(m,n)||(f[e]=n)));if(h&&(j=a._depsMap[e]))for(k=j.length;k--;)d(a,j[k],f,g,h)}return function(b,c){var e,f,g;if("string"!=typeof b&&(b="",c=!0),d(this,b,e={},f=[],c),g=f.length)for(;g--;)b=f[g],e[b]=a(this,b);return this.set(e)}}(w,qc,n),Ce=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){return{add:a,animate:b,detach:c,find:d,findAll:e,findAllComponents:f,findComponent:g,fire:h,get:i,insert:j,merge:k,observe:l,off:m,on:n,render:o,renderHTML:p,reset:q,resetTemplate:r,set:s,subtract:t,teardown:u,toHTML:v,toggle:w,update:x,updateModel:y}}(m,db,eb,fb,pb,qb,rb,sb,ub,wb,zb,Eb,Fb,Gb,he,ie,te,ue,ve,we,xe,ye,ze,Ae,Be),De={},Ee={linear:function(a){return a},easeIn:function(a){return Math.pow(a,3)},easeOut:function(a){return Math.pow(a-1,3)+1},easeInOut:function(a){return(a/=.5)<1?.5*Math.pow(a,3):.5*(Math.pow(a-2,3)+2)}},Fe=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b,c;return b=16*Math.random()|0,c="x"==a?b:3&b|8,c.toString(16)})},Ge=function(){function a(a){return a.trim?a.trim():a.replace(/^\s+/,"").replace(/\s+$/,"")}function b(a){return a.str}var c=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,d=/\/\*.*?\*\//g,e=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>\~:]))+)((?::[^\s\+\>\~]+)?\s*[\s\+\>\~]?)\s*/g;return function(f,g){var h,i;return i=function(a){var c,d,f,h,i,j,k,l,m=[];for(c=[];d=e.exec(a);)c.push({str:d[0],base:d[1],modifiers:d[2]});for(h='[data-rvcguid="'+g+'"]',i=c.map(b),l=c.length;l--;)k=i.slice(),f=c[l],k[l]=f.base+h+f.modifiers||"",j=i.slice(),j[l]=h+" "+j[l],m.push(k.join(" "),j.join(" "));return m.join(", ")},h=f.replace(d,"").replace(c,function(b,c){var d,e;return d=c.split(",").map(a),e=d.map(i).join(", ")+" ",b.replace(c,e)})}}(),He=function(a,b,c,d){return function(e,f){a.forEach(function(a){f[a]&&(e[a]=b(f[a]))}),c(e,"defaults",{value:b(f.defaults)}),f.css&&c(e,"css",{value:f.defaults.noCssTransform?f.css:d(f.css,e._guid)})}}(je,Hb,i,Ge),Ie=function(a,b){return/_super/.test(a)?function(){var c,d=this._super;return this._super=b,c=a.apply(this,arguments),this._super=d,c}:a},Je=function(a,b){var c;for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},Ke=function(a,b,c,d,e,f){var g={};return b.concat(a.keys).forEach(function(a){g[a]=!0}),function(h,i){var j,k;b.forEach(function(a){var b=i[a];b&&(h[a]?e(h[a],b):h[a]=b)}),a.keys.forEach(function(a){var b=i[a];void 0!==b&&(h.defaults[a]="function"==typeof b&&"function"==typeof h[a]?d(b,h[a]):i[a])});for(j in i)!g[j]&&i.hasOwnProperty(j)&&(k=i[j],h.prototype[j]="function"==typeof k&&"function"==typeof h.prototype[j]?d(k,h.prototype[j]):k);i.css&&c(h,"css",{value:h.defaults.noCssTransform?i.css:f(i.css,h._guid)})}}(d,je,i,Ie,Je,Ge),Le=function(a,b){return function(c,d){a(c.defaults.template)&&(c.partials||(c.partials={}),b(c.partials,c.defaults.template.partials),d.partials&&b(c.partials,d.partials),c.defaults.template=c.defaults.template.main)}}(_,Je),Me=function(a,b,c){return function(d){var e;if("string"==typeof d.defaults.template){if(!c)throw new Error(a.missingParser);if("#"===d.defaults.template.charAt(0)&&b){if(e=document.getElementById(d.defaults.template.substring(1)),!e||"SCRIPT"!==e.tagName)throw new Error("Could not find template element ("+d.defaults.template+")");d.defaults.template=c(e.innerHTML,d)}else d.defaults.template=c(d.defaults.template,d.defaults)}}}(Ed,h,Ud),Ne=function(a,b){return function(c){var d;if(c.partials)for(d in c.partials)if(c.partials.hasOwnProperty(d)&&"string"==typeof c.partials[d]){if(!b)throw new Error(a.missingParser);c.partials[d]=b(c.partials[d],c)}}}(Ed,Ud),Oe=function(a,b,c,d,e,f,g,h,i,j){function k(b,c,d){l(c),l(d),a.keys.forEach(function(a){void 0===d[a]&&(d[a]=c[a])}),o.forEach(function(a){b[a]=d[a]}),"string"==typeof b.adapt&&(b.adapt=[b.adapt]),m(b,d)}function l(a){f(a.adaptors)&&(b("The `adaptors` option, to indicate which adaptors should be used with a given Ractive instance, has been deprecated in favour of `adapt`. See [TODO] for more information"),a.adapt=a.adaptors,delete a.adaptors),a.eventDefinitions&&(b("ractive.eventDefinitions has been deprecated in favour of ractive.events. Support will be removed in future versions"),a.events=a.eventDefinitions)
}function m(a,b){var c;if(a.magic&&!h)throw new Error("Getters and setters (magic mode) are not supported in this browser");if(b.el){if(a.el=e(b.el),!a.el&&a.debug)throw new Error("Could not find container element");(c=e(b.append))&&(a.anchor=c)}}function n(a,b){d(a,{_initing:{value:!0,writable:!0},_guid:{value:g()},_subs:{value:c(null),configurable:!0},_cache:{value:{}},_cacheMap:{value:c(null)},_deps:{value:[]},_depsMap:{value:c(null)},_patternObservers:{value:[]},_evaluators:{value:c(null)},_computations:{value:c(null)},_twowayBindings:{value:{}},_animations:{value:[]},nodes:{value:{}},_wrapped:{value:c(null)},_liveQueries:{value:[]},_liveComponentQueries:{value:[]},_childInitQueue:{value:[]},_changes:{value:[]},_unresolvedImplicitDependencies:{value:[]}}),a.parseOptions={preserveWhitespace:b.preserveWhitespace,sanitize:b.sanitize,stripComments:b.stripComments,delimiters:b.delimiters,tripleDelimiters:b.tripleDelimiters,handlebars:b.handlebars},b._parent&&b._component&&(d(a,{_parent:{value:b._parent},component:{value:b._component}}),b._component.instance=a)}var o=["adapt","modifyArrays","magic","twoway","lazy","debug","isolated"];return function(a,b){var c=a.constructor.defaults;a.initOptions=b=b||{},k(a,c,b),n(a,b),i(a,c,b),j(a,b),a._initing=!1}}(d,$,Hb,j,vb,F,Fe,R,re,se),Pe=function(a,b,c){return function(d,e,f){a.keys.forEach(function(a){var c=f[a],d=e.defaults[a];"function"==typeof c&&"function"==typeof d&&(f[a]=b(c,d))}),d.beforeInit&&d.beforeInit(f),c(d,f),f._parent&&f._parent._rendering?f._parent._childInitQueue.push({instance:d,options:f}):d.init&&d.init(f)}}(d,Ie,Oe),Qe=function(a,b,c,d,e,f,g,h,i,j,k){var l;return k.push(function(){l=k.Ractive}),function m(k){var n,o,p,q=this;if(k.prototype instanceof l&&(k=d({},k,k.prototype,k.defaults)),n=function(a){j(this,n,a||{})},n.prototype=a(q.prototype),n.prototype.constructor=n,n.extend=m,b(n,"_guid",{value:c()}),e(n,q),f(n,k),n.adaptors&&(p=n.defaults.adapt.length))for(;p--;)o=n.defaults.adapt[p],"string"==typeof o&&(n.defaults.adapt[p]=n.adaptors[o]||o);return k.template&&(h(n),g(n,k),i(n)),n}}(Hb,i,Fe,ke,He,Ke,Le,Me,Ne,Pe,t),Re=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=function(a){m(this,a)};return o.prototype=d,c(o,{partials:{value:e},adaptors:{value:f},easing:{value:h},transitions:{value:{}},events:{value:{}},components:{value:g},decorators:{value:{}},interpolators:{value:i},defaults:{value:a.defaults},svg:{value:b},VERSION:{value:"0.4.0"}}),o.eventDefinitions=o.events,o.prototype.constructor=o,o.Promise=j,o.extend=k,o.parse=l,n.Ractive=o,o}(d,e,j,Ce,Fd,H,De,Ee,ab,o,Qe,Ud,Oe,t),Se=function(a,b){for(var c="function";b.length;)b.pop()();if(typeof Date.now!==c||typeof String.prototype.trim!==c||typeof Object.keys!==c||typeof Array.prototype.indexOf!==c||typeof Array.prototype.forEach!==c||typeof Array.prototype.map!==c||typeof Array.prototype.filter!==c||"undefined"!=typeof window&&typeof window.addEventListener!==c)throw new Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.");return"undefined"!=typeof window&&window.Node&&!window.Node.prototype.contains&&window.HTMLElement&&window.HTMLElement.prototype.contains&&(window.Node.prototype.contains=window.HTMLElement.prototype.contains),a}(Re,t,c);"undefined"!=typeof module&&module.exports?module.exports=Se:"function"==typeof define&&define.amd&&define(function(){return Se}),a.Ractive=Se,Se.noConflict=function(){return a.Ractive=b,Se}}("undefined"!=typeof window?window:this);